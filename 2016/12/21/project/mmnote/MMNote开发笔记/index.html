<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="è¿™æ˜¯æœ¨æ‰çš„ä¸ªäººåšå®¢"><title>MMNoteå¼€å‘ç¬”è®° | æœ¨æ‰çš„åšå®¢</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">MMNoteå¼€å‘ç¬”è®°</h1><a id="logo" href="/.">æœ¨æ‰çš„åšå®¢</a><p class="description">è¦ä¹ˆç²¾é€šï¼Œè¦ä¹ˆæ­»</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">MMNoteå¼€å‘ç¬”è®°</h1><div class="post-meta">Dec 21, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span></div><a data-disqus-identifier="2016/12/21/project/mmnote/MMNoteå¼€å‘ç¬”è®°/" href="/2016/12/21/project/mmnote/MMNoteå¼€å‘ç¬”è®°/#disqus_thread" class="disqus-comment-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#å€¼å¾—å­¦ä¹ çš„æ•™ç¨‹"><span class="toc-number">1.</span> <span class="toc-text">å€¼å¾—å­¦ä¹ çš„æ•™ç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å€¼å¾—å­¦ä¹ çš„APP"><span class="toc-number">2.</span> <span class="toc-text">å€¼å¾—å­¦ä¹ çš„APP</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼€å‘å·¥å…·"><span class="toc-number">3.</span> <span class="toc-text">å¼€å‘å·¥å…·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ‰“åŒ…å·¥å…·"><span class="toc-number">4.</span> <span class="toc-text">æ‰“åŒ…å·¥å…·</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å¼€å‘æ‰‹è®°"><span class="toc-number">5.</span> <span class="toc-text">å¼€å‘æ‰‹è®°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2016å¹´12æœˆ22æ—¥-ReactåŠ¨ç”»"><span class="toc-number">5.1.</span> <span class="toc-text">2016å¹´12æœˆ22æ—¥ ReactåŠ¨ç”»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2016å¹´12æœˆ25æ—¥-æ ‘æ§ä»¶-Webpackè‡ªåŠ¨åˆ·æ–°-åŒºåˆ†é…ç½®æ–‡ä»¶"><span class="toc-number">5.2.</span> <span class="toc-text">2016å¹´12æœˆ25æ—¥ æ ‘æ§ä»¶ Webpackè‡ªåŠ¨åˆ·æ–° åŒºåˆ†é…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2016å¹´12æœˆ30-31æ—¥-æ–°å»ºå·¥ç¨‹"><span class="toc-number">5.3.</span> <span class="toc-text">2016å¹´12æœˆ30-31æ—¥ æ–°å»ºå·¥ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ01æ—¥-æ˜ŸæœŸæ—¥-æ ‘å½¢æ§ä»¶ä¸çœŸå®ç›®å½•å¯¹åº”"><span class="toc-number">5.4.</span> <span class="toc-text">2017å¹´01æœˆ01æ—¥ æ˜ŸæœŸæ—¥ æ ‘å½¢æ§ä»¶ä¸çœŸå®ç›®å½•å¯¹åº”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ02æ—¥-æ˜ŸæœŸä¸€-æ ‘å½¢æ§ä»¶æ»šåŠ¨æ¡æ ·å¼"><span class="toc-number">5.5.</span> <span class="toc-text">2017å¹´01æœˆ02æ—¥ æ˜ŸæœŸä¸€ æ ‘å½¢æ§ä»¶æ»šåŠ¨æ¡æ ·å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ04æ—¥-æ˜ŸæœŸä¸‰-IPC"><span class="toc-number">5.6.</span> <span class="toc-text">2017å¹´01æœˆ04æ—¥ æ˜ŸæœŸä¸‰ IPC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ07æ—¥-æ˜ŸæœŸå…­-å¿«æ·é”®-å‘½ä»¤æ¡†æ¶"><span class="toc-number">5.7.</span> <span class="toc-text">2017å¹´01æœˆ07æ—¥ æ˜ŸæœŸå…­ å¿«æ·é”® å‘½ä»¤æ¡†æ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ08æ—¥-æ˜ŸæœŸæ—¥-CodeMirroræ’ä»¶æœºåˆ¶"><span class="toc-number">5.8.</span> <span class="toc-text">2017å¹´01æœˆ08æ—¥ æ˜ŸæœŸæ—¥ CodeMirroræ’ä»¶æœºåˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ14æ—¥-æ˜ŸæœŸå…­-å®Œå–„é¡¹ç›®æ­å»º"><span class="toc-number">5.9.</span> <span class="toc-text">2017å¹´01æœˆ14æ—¥ æ˜ŸæœŸå…­ å®Œå–„é¡¹ç›®æ­å»º</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ15æ—¥-æ˜ŸæœŸæ—¥-å·¥ä½œæµå‡çº§-gulp-electron-connect-mocha"><span class="toc-number">5.10.</span> <span class="toc-text">2017å¹´01æœˆ15æ—¥ æ˜ŸæœŸæ—¥ å·¥ä½œæµå‡çº§ gulp electron-connect mocha</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ18æ—¥-æ˜ŸæœŸä¸‰-æ›´æ–°ä»£ç ç»“æ„-main-render-test"><span class="toc-number">5.11.</span> <span class="toc-text">2017å¹´01æœˆ18æ—¥ æ˜ŸæœŸä¸‰ æ›´æ–°ä»£ç ç»“æ„ main render test</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ19æ—¥-æ˜ŸæœŸå››-åœ¨electronä¸­å®‰è£…è°ƒè¯•æ’ä»¶"><span class="toc-number">5.12.</span> <span class="toc-text">2017å¹´01æœˆ19æ—¥ æ˜ŸæœŸå›› åœ¨electronä¸­å®‰è£…è°ƒè¯•æ’ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ23æ—¥-æ˜ŸæœŸä¸€-react-redux"><span class="toc-number">5.13.</span> <span class="toc-text">2017å¹´01æœˆ23æ—¥ æ˜ŸæœŸä¸€ react-redux</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ24æ—¥-æ˜ŸæœŸäºŒ-immutable-js"><span class="toc-number">5.14.</span> <span class="toc-text">2017å¹´01æœˆ24æ—¥ æ˜ŸæœŸäºŒ immutable.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ26æ—¥-æ˜ŸæœŸå››-å¼‚æ­¥action-ä½¿ç”¨æ²¡æœ‰ç±»å‹å®šä¹‰çš„åŒ…"><span class="toc-number">5.15.</span> <span class="toc-text">2017å¹´01æœˆ26æ—¥ æ˜ŸæœŸå›› å¼‚æ­¥action ä½¿ç”¨æ²¡æœ‰ç±»å‹å®šä¹‰çš„åŒ…</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´01æœˆ29æ—¥-æ˜ŸæœŸæ—¥"><span class="toc-number">5.16.</span> <span class="toc-text">2017å¹´01æœˆ29æ—¥ æ˜ŸæœŸæ—¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ03æ—¥-æ˜ŸæœŸäº”-ç²˜è´´å›¾ç‰‡"><span class="toc-number">5.17.</span> <span class="toc-text">2017å¹´02æœˆ03æ—¥ æ˜ŸæœŸäº” ç²˜è´´å›¾ç‰‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ05æ—¥-æ˜ŸæœŸæ—¥"><span class="toc-number">5.18.</span> <span class="toc-text">2017å¹´02æœˆ05æ—¥ æ˜ŸæœŸæ—¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ08æ—¥-æ˜ŸæœŸä¸‰"><span class="toc-number">5.19.</span> <span class="toc-text">2017å¹´02æœˆ08æ—¥ æ˜ŸæœŸä¸‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ09æ—¥-æ˜ŸæœŸå››-åˆ—è¡¨è¡¥å…¨-æ ‡é¢˜å¤§å°åŒºåˆ†"><span class="toc-number">5.20.</span> <span class="toc-text">2017å¹´02æœˆ09æ—¥ æ˜ŸæœŸå›› åˆ—è¡¨è¡¥å…¨ æ ‡é¢˜å¤§å°åŒºåˆ†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ10æ—¥-æ˜ŸæœŸå…­-æ‰“åŒ…-ç¼–è¾‘å™¨å¡é¡¿æ’æŸ¥"><span class="toc-number">5.21.</span> <span class="toc-text">2017å¹´02æœˆ10æ—¥ æ˜ŸæœŸå…­ æ‰“åŒ… ç¼–è¾‘å™¨å¡é¡¿æ’æŸ¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ12æ—¥-æ˜ŸæœŸæ—¥-äº†è§£Draft-js-File-URI-stateæ€è€ƒ"><span class="toc-number">5.22.</span> <span class="toc-text">2017å¹´02æœˆ12æ—¥ æ˜ŸæœŸæ—¥ äº†è§£Draft.js File URI stateæ€è€ƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ13æ—¥-æ˜ŸæœŸä¸€"><span class="toc-number">5.23.</span> <span class="toc-text">2017å¹´02æœˆ13æ—¥ æ˜ŸæœŸä¸€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ18æ—¥-æ˜ŸæœŸå…­-tree-viewç»“åˆRedux-è½¯é“¾æ¥å¤„ç†-fs-promise"><span class="toc-number">5.24.</span> <span class="toc-text">2017å¹´02æœˆ18æ—¥ æ˜ŸæœŸå…­ tree-viewç»“åˆRedux è½¯é“¾æ¥å¤„ç† fs-promise</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ19æ—¥-æ˜ŸæœŸæ—¥"><span class="toc-number">5.25.</span> <span class="toc-text">2017å¹´02æœˆ19æ—¥ æ˜ŸæœŸæ—¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ20æ—¥-æ˜ŸæœŸä¸€"><span class="toc-number">5.26.</span> <span class="toc-text">2017å¹´02æœˆ20æ—¥ æ˜ŸæœŸä¸€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ22æ—¥-æ˜ŸæœŸä¸‰"><span class="toc-number">5.27.</span> <span class="toc-text">2017å¹´02æœˆ22æ—¥ æ˜ŸæœŸä¸‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2017å¹´02æœˆ26æ—¥-æ˜ŸæœŸæ—¥-åˆæ­¥æ•´åˆkityminder-å­¦ä¹ mobx"><span class="toc-number">5.28.</span> <span class="toc-text">2017å¹´02æœˆ26æ—¥ æ˜ŸæœŸæ—¥ åˆæ­¥æ•´åˆkityminder å­¦ä¹ mobx</span></a></li></ol></li></ol></div></div><div class="post-content"><a id="more"></a>
<h2 id="å€¼å¾—å­¦ä¹ çš„æ•™ç¨‹"><a href="#å€¼å¾—å­¦ä¹ çš„æ•™ç¨‹" class="headerlink" title="å€¼å¾—å­¦ä¹ çš„æ•™ç¨‹"></a>å€¼å¾—å­¦ä¹ çš„æ•™ç¨‹</h2><ul>
<li><a href="https://zhuanlan.zhihu.com/p/20225295?columnSlug=FrontendMagazine" target="_blank" rel="noopener">ä½¿ç”¨ Electron æ„å»ºæ¡Œé¢åº”ç”¨ - å‰ç«¯å¤–åˆŠè¯„è®º - çŸ¥ä¹ä¸“æ </a></li>
</ul>
<h2 id="å€¼å¾—å­¦ä¹ çš„APP"><a href="#å€¼å¾—å­¦ä¹ çš„APP" class="headerlink" title="å€¼å¾—å­¦ä¹ çš„APP"></a>å€¼å¾—å­¦ä¹ çš„APP</h2><ul>
<li><a href="https://github.com/brrd/Abricotine" target="_blank" rel="noopener">brrd/Abricotine: Markdown editor with inline preview</a></li>
<li><a href="https://github.com/Automattic/simplenote-electron" target="_blank" rel="noopener">Automattic/simplenote-electron: A Simplenote React app packaged in Electron</a></li>
<li><a href="https://github.com/AnotherNote/anote" target="_blank" rel="noopener">AnotherNote/anote: another markdown note (inspired by evernote)</a></li>
<li><a href="https://github.com/amitmerchant1990/electron-markdownify" target="_blank" rel="noopener">amitmerchant1990/electron-markdownify: A minimal Markdown editor desktop app based on Electron</a></li>
</ul>
<h2 id="å¼€å‘å·¥å…·"><a href="#å¼€å‘å·¥å…·" class="headerlink" title="å¼€å‘å·¥å…·"></a>å¼€å‘å·¥å…·</h2><h2 id="æ‰“åŒ…å·¥å…·"><a href="#æ‰“åŒ…å·¥å…·" class="headerlink" title="æ‰“åŒ…å·¥å…·"></a>æ‰“åŒ…å·¥å…·</h2><ul>
<li><a href="https://github.com/electron/electron/blob/master/docs/tutorial/application-distribution.md" target="_blank" rel="noopener">electron/application-distribution.md at master Â· electron/electron</a></li>
<li><a href="https://github.com/electron-userland/electron-builder" target="_blank" rel="noopener">electron-userland/electron-builder: A complete solution to package and build a ready for distribution Electron app with â€œauto updateâ€ support out of the box</a></li>
<li><a href="https://github.com/electron-userland/electron-packager" target="_blank" rel="noopener">electron-userland/electron-packager: Package and distribute your Electron app with OS-specific bundles (.app, .exe etc) via JS or CLI</a></li>
</ul>
<h2 id="å¼€å‘æ‰‹è®°"><a href="#å¼€å‘æ‰‹è®°" class="headerlink" title="å¼€å‘æ‰‹è®°"></a>å¼€å‘æ‰‹è®°</h2><h3 id="2016å¹´12æœˆ22æ—¥-ReactåŠ¨ç”»"><a href="#2016å¹´12æœˆ22æ—¥-ReactåŠ¨ç”»" class="headerlink" title="2016å¹´12æœˆ22æ—¥ ReactåŠ¨ç”»"></a>2016å¹´12æœˆ22æ—¥ ReactåŠ¨ç”»</h3><p>è¿™ä¸¤å¤©ä»react-treebeardè¿™ä¸ªæ’ä»¶çœ‹èµ·ï¼Œäº†è§£å…¶ä¸­ä½¿ç”¨åˆ°çš„Radiumå’Œvelocity-reactã€‚å› ä¸ºè¿™ä¸ªæ’ä»¶åœ¨é™åˆ¶å®½åº¦çš„æƒ…å†µä¸‹ï¼Œæ˜¾ç¤ºæœ‰äº›é—®é¢˜ï¼Œæ‰€ä»¥è¦ä¹ˆè¿›è¡Œä¿®æ”¹ï¼Œè¦ä¹ˆå¾—è‡ªå·±å†™ä¸€ä¸ªã€‚</p>
<p>å…³äº<strong>æ ‘èŠ‚ç‚¹åŠ¨ç”»</strong>ï¼Œè¿™ä¸ªæ’ä»¶åœ¨å±•å¼€èŠ‚ç‚¹æ—¶ï¼Œä¼šæ—‹è½¬å·¦ä¾§ç®­å¤´(svgç”»çš„)ï¼ŒåŒæ—¶ä¼šåŠ¨ç”»å±•å¼€å…¶å­åˆ—è¡¨ã€‚è¿™ä¸ªè¿˜ä¸é”™ã€‚æˆ‘ä¸€ç›´ä»¥ä¸ºæ‰€æœ‰çš„ç¼–è¾‘å™¨éƒ½æœ‰è¿™ä¸ªåŠ¨ç”»çš„ï¼Œä»¥ä¸ºå¾ˆåŸºç¡€å˜›ï¼Œæ²¡æƒ³åˆ°è§‚å¯Ÿäº†ä¸€ä¸‹,æ¯ä¸ªç¼–è¾‘å™¨è¡¨ç°éƒ½ä¸ä¸€æ ·ï¼š</p>
<ul>
<li>sublime: ç®­å¤´æ— åŠ¨ç”»ï¼Œå±•å¼€æœ‰åŠ¨ç”»</li>
<li>vscode: éƒ½æ— åŠ¨ç”»</li>
<li>atom: éƒ½æ— åŠ¨ç”»</li>
<li>TextMate: ç®­å¤´æ— åŠ¨ç”»ï¼Œå±•å¼€æœ‰åŠ¨ç”»</li>
</ul>
<p>æ²¡æƒ³åˆ°ï¼Œè¿™ä¸¤ä¸ªåŠ¨ç”»ç«Ÿç„¶æ²¡æœ‰åšå…¨çš„ã€‚å…¶ä¸­ï¼Œçœ‹äº†vscodeå’Œatomçš„htmlï¼Œå…¶ç®­å¤´éƒ½æ˜¯ä½¿ç”¨::beforeä¼ªå…ƒç´ åšåˆ°çš„ï¼Œæ‰€ä»¥ä¸æ”¯æŒåŠ¨ç”»å§ã€‚(2016å¹´12æœˆ24æ—¥ è¡¥å……ï¼šçœ‹äº†ä¸‹ant designçš„æ ‘æ§ä»¶ï¼Œä½¿ç”¨ä¼ªå…ƒç´ ï¼Œä¹Ÿæ˜¯èƒ½åšåˆ°åŠ¨ç”»çš„)</p>
<p>å†è¯´è¯´<strong>åœ¨æœ‰é™ç©ºé—´å†…ï¼Œå„ä¸ªç¼–è¾‘å™¨æ˜¯å¦‚ä½•å±•ç¤ºçš„æ¡ç›®</strong>çš„ï¼š</p>
<ul>
<li>sublime: ä¸ä¼šå‹ç¼©æ˜¾ç¤ºï¼Œå¯ä»¥æ¨ªå‘æ»šåŠ¨</li>
<li>vscode: å‹ç¼©æ˜¾ç¤ºï¼Œæ¡ç›®åç§°æœ€åå‹ç¼©ä¸ºçœç•¥å·</li>
<li>atom: ä¸ä¼šå‹ç¼©æ˜¾ç¤ºï¼Œå¯ä»¥æ¨ªå‘æ»šåŠ¨</li>
<li>TextMate: å‹ç¼©æ˜¾ç¤ºï¼Œæ¡ç›®åç§°ä¸­é—´å‹ç¼©ä¸ºçœç•¥å·</li>
</ul>
<p>æˆ‘ä¸ªäººæ˜¯å€¾å‘äºä¸å‹ç¼©æ˜¾ç¤ºçš„ã€‚</p>
<h3 id="2016å¹´12æœˆ25æ—¥-æ ‘æ§ä»¶-Webpackè‡ªåŠ¨åˆ·æ–°-åŒºåˆ†é…ç½®æ–‡ä»¶"><a href="#2016å¹´12æœˆ25æ—¥-æ ‘æ§ä»¶-Webpackè‡ªåŠ¨åˆ·æ–°-åŒºåˆ†é…ç½®æ–‡ä»¶" class="headerlink" title="2016å¹´12æœˆ25æ—¥ æ ‘æ§ä»¶ Webpackè‡ªåŠ¨åˆ·æ–° åŒºåˆ†é…ç½®æ–‡ä»¶"></a>2016å¹´12æœˆ25æ—¥ æ ‘æ§ä»¶ Webpackè‡ªåŠ¨åˆ·æ–° åŒºåˆ†é…ç½®æ–‡ä»¶</h3><p>ä»Šå¤©æ—©ä¸Šç«Ÿç„¶å¤±çœ ï¼Œ6ç‚¹å¤šå°±èµ·æ¥äº†ï¼Œç»§ç»­å†™æ ‘æ§ä»¶ï¼Œç°åœ¨æœ‰ç‚¹æ ·å­äº†ï¼Œæ•´åˆäº†web fontå’Œmax-contentï¼š</p>
<p><img src="/img/mmnote/2016-12-25.png" alt=""></p>
<p>ä¸»è¦æ˜¯è§£å†³äº†react-treebreadç©ºé—´çš„å°ç©ºé—´æ¢è¡Œé—®é¢˜å’Œå®½åº¦ä¸å¯¹é—®é¢˜ã€‚CSSçš„widthæ˜¯å…³é”®ï¼Œå…·ä½“å‚è€ƒäº†ï¼š<a href="http://www.zhangxinxu.com/wordpress/2016/05/css3-width-max-contnet-min-content-fit-content/" target="_blank" rel="noopener">ç†è§£CSS3 max/min-contentåŠfit-contentç­‰widthå€¼</a>.</p>
<p>æˆ‘ä¸€éåšä¸€è¾¹å‚è€ƒatomå’Œvscodeï¼ˆåŸºäºHTML5æŠ€æœ¯å°±æ˜¯å¥½å•Šï¼Œéšæ—¶éšåœ°å¯ä»¥å‚è€ƒï¼‰ã€‚å‘ç°atomæ˜¯å¸¸è§„åšæ³•ï¼Œä¹Ÿå°±æ˜¯æ•´ä¸ªæ ‘æ˜¯ä¸€ä¸ªolæˆ–è€…ulï¼Œç„¶åä¸€ä¸ªä¸€ä¸ªé€’å½’æ¸²æŸ“å‡ºã€‚å¯¹äºæ²¡æœ‰æ‰“å¼€çš„å­ç›®å½•æ˜¯ä¸ä¼šæ¸²æŸ“åˆ°DOMä¸Šçš„ã€‚</p>
<p>ä½†æ˜¯vscodeå´ä¸æ˜¯ã€‚å…¶ç›®å½•æ ‘å®Œå…¨æ˜¯ä¸€ä¸ªdiv listã€‚å±‚çº§å…³ç³»çš„è¡¨ç¤ºéƒ½æ˜¯åœ¨inline styleä¸­è®¾ç½®padding leftåšåˆ°çš„ï¼Œåº”è¯¥æ˜¯åœ¨ä»£ç ä¸­ç®—å‡ºæ¥çš„ã€‚è€Œä¸”ï¼Œæœ€æœ€é‡è¦çš„ä¸€ç‚¹ï¼Œä»–æ²¡æœ‰æ¸²æŸ“å‡ºæ•´ä¸ªå·²ç»æ‰“å¼€çš„ç›®å½•æ ‘ï¼Œè€Œæ˜¯åªæ¸²æŸ“äº†ä½†æ±‚å¯è§èŒƒå›´å†…çš„èŠ‚ç‚¹ï¼ï¼ï¼<strong>è¿™æ˜¯å¤šä¹ˆæœºæ™ºçš„ä¼˜åŒ–å•Šï¼ï¼ï¼</strong></p>
<p>è¿™æ ·å°±ç®—ä½ æ‰“å¼€äº†Nå¤šæ–‡ä»¶çš„ç›®å½•ï¼Œé¡µé¢ä¹Ÿä¸ä¼šå¡é¡¿ï¼Œå› ä¸ºä»–åªæ¸²æŸ“å½“å‰å¯ä»¥æ˜¾ç¤ºçš„è¿™ä¹ˆåå‡ æ¡æ•°æ®ã€‚å­¦ä¹ äº†ã€‚</p>
<p>æ™šä¸Šï¼š<br>å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨webpackçš„å¼€å‘æœåŠ¡å™¨ï¼Œä»¥åŠå¦‚ä½•åŒºåˆ†é…ç½®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;hot-server&quot;: &quot;cross-env NODE_ENV=development node --max_old_space_size=2096 -r babel-register server.js&quot;,</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯electron-react-boilerplateé¡¹ç›®çš„ä¸€ä¸ªnpm scriptã€‚é€šè¿‡cross-envè¿™ä¸ªåŒ…æ¥æŒ‡å®šç¯å¢ƒå˜é‡ï¼ŒåŒºåˆ†å¼€å‘ç¯å¢ƒè¿˜æ˜¯æ­£å¼ç¯å¢ƒï¼Œç„¶ååœ¨ä»£ç ä¸­åˆ¤æ–­è¯¥å˜é‡èµ°ä¸é€šé…ç½®ç­‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">if (process.env.NODE_ENV === &apos;production&apos;) &#123;</span><br><span class="line">  module.exports = require(&apos;./configureStore.production&apos;); // eslint-disable-line global-require</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  module.exports = require(&apos;./configureStore.development&apos;); // eslint-disable-line global-require</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>çœ‹äº†ä¸‹<a href="http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_three_react-redux.html" target="_blank" rel="noopener">Redux å…¥é—¨æ•™ç¨‹ï¼ˆä¸‰ï¼‰ï¼šReact-Redux çš„ç”¨æ³• - é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—</a>ï¼Œä¸æ˜¯å¾ˆæ‡‚ã€‚ã€‚ã€‚æ„Ÿè§‰ç»“åˆReduxè¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œæ¦‚å¿µæ¯”è¾ƒå¤šã€‚</p>
<p>è¿™ä¸¤å¤©å¯¹æ•´ä¸ªReactåº”ç”¨å¼€å‘å’ŒCSSéƒ½åŠ æ·±äº†è®¤è¯†ï¼Œä½†æ˜¯å®Œå…¨ä¸å¤Ÿå•Šï¼Œè¿˜æ˜¯æ²¡æœ‰åˆ°è¾¾èƒ½å¤Ÿâ€œå¼€å·¥â€çš„æ ‡å‡†ã€‚ã€‚ã€‚</p>
<h3 id="2016å¹´12æœˆ30-31æ—¥-æ–°å»ºå·¥ç¨‹"><a href="#2016å¹´12æœˆ30-31æ—¥-æ–°å»ºå·¥ç¨‹" class="headerlink" title="2016å¹´12æœˆ30-31æ—¥ æ–°å»ºå·¥ç¨‹"></a>2016å¹´12æœˆ30-31æ—¥ æ–°å»ºå·¥ç¨‹</h3><p>å æ—¶å…ˆä¸å­¦ä¹ Reduxäº†ï¼Œç›´æ¥å¼€å§‹å†™å§ï¼Œæ–°å»ºå·¥ç¨‹èµ°èµ·ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mkdir mmnote</span><br><span class="line">cd mmnote</span><br><span class="line">npm init</span><br><span class="line"></span><br><span class="line">npm install --save-dev webpack typescript awesome-typescript-loader source-map-loader  css-loader style-loader webpack-dev-server less less-loader</span><br><span class="line">npm install --save react react-dom @types/react @types/react-dom lodash electron normalize.css</span><br><span class="line">npm install --save codemirror @types/codemirror react-split-pane @types/react-split-pane</span><br><span class="line"></span><br><span class="line">// fs-extra @types/fs-extra</span><br></pre></td></tr></table></figure>
<p>//TODO æ­å»ºé¡¹ç›®ç¬”è®°ï¼Œè®°å½•ç›®å‰æ­å»ºçš„æ­¥éª¤ï¼Œéšç€é¡¹ç›®ä¸æ–­æ¨è¿›ï¼Œä¸æ–­å­¦ä¹ åæ›´æ–°ã€‚</p>
<p><img src="/img/mmnote-2016-12-31-tree-demo.png" alt=""></p>
<h3 id="2017å¹´01æœˆ01æ—¥-æ˜ŸæœŸæ—¥-æ ‘å½¢æ§ä»¶ä¸çœŸå®ç›®å½•å¯¹åº”"><a href="#2017å¹´01æœˆ01æ—¥-æ˜ŸæœŸæ—¥-æ ‘å½¢æ§ä»¶ä¸çœŸå®ç›®å½•å¯¹åº”" class="headerlink" title="2017å¹´01æœˆ01æ—¥ æ˜ŸæœŸæ—¥ æ ‘å½¢æ§ä»¶ä¸çœŸå®ç›®å½•å¯¹åº”"></a>2017å¹´01æœˆ01æ—¥ æ˜ŸæœŸæ—¥ æ ‘å½¢æ§ä»¶ä¸çœŸå®ç›®å½•å¯¹åº”</h3><p>ä»Šå¤©é›¾éœ¾å¥½å¤§ï¼Œå»å¥¥æ—åŒ¹å…‹å…¬å›­é€›äº†é€›ã€‚ä»Šå¤©äº‰å–å§ç›®å½•æ ‘å’ŒçœŸæ˜¯ç›®å½•å¯¹åº”ä¸Šã€‚</p>
<p>ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯node.jsä¸­å¦‚ä½•éå†ç›®å½•æ ‘ã€‚</p>
<p>fs-extraè¿™ä¸ªåŒ…æ˜¯fsåŒ…çš„æ‰©å±•ï¼Œå…¶ä¸­åŒ…æ‹¬äº†éå†ç›®å½•æ ‘ã€‚</p>
<p>ä½†æ˜¯å‘¢ï¼Œä¾èµ–è¿™ç§æ‰©å±•ï¼Œå¯¹åº”çš„tså£°æ˜åˆå¤ªä¹…äº†ï¼Œç°åœ¨è¿˜æ‡’å¾—å­¦ä¹ å¦‚ä½•ç¼–å†™å£°æ˜ã€‚è¿˜æ˜¯çœ‹çœ‹å¯¹åº”çš„walkæ˜¯å¦‚ä½•å®ç°çš„å§ã€‚</p>
<p><a href="https://github.com/jprichardson/node-klaw" target="_blank" rel="noopener">node-klaw: A Node.js file system walker with a Readable stream interface</a></p>
<p>ä»£ç å¾ˆç®€å•ï¼Œå°±ä¸€ä¸ªæ–‡ä»¶ï¼Œä½†æ˜¯æ¶‰åŠçš„çŸ¥è¯†ç‚¹å¾ˆå¤šã€‚</p>
<p>æˆ‘å­¦ç€ä»–çš„ä»£ç å†™äº†ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">var Readable = require(&quot;stream&quot;).Readable;</span><br><span class="line">var util = require(&quot;util&quot;);</span><br><span class="line"></span><br><span class="line">function Walker() &#123;</span><br><span class="line">    var options = &#123;</span><br><span class="line">        objectMode: true</span><br><span class="line">    &#125;;</span><br><span class="line">    this.result = [];</span><br><span class="line">    Readable.call(this, options);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Walker.prototype._read = function() &#123;</span><br><span class="line">    if (this.result.length == 3) &#123;</span><br><span class="line">        return this.push(null);</span><br><span class="line">    &#125;</span><br><span class="line">    this.result.push(&quot;hello&quot;);</span><br><span class="line">    this.push(&quot;hello&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">util.inherits(Walker, Readable)</span><br><span class="line"></span><br><span class="line">var walk = new Walker();</span><br><span class="line">walk.on(&quot;data&quot;, function(data) &#123;</span><br><span class="line">    console.log(data);</span><br><span class="line">&#125;);</span><br><span class="line">walk.on(&quot;end&quot;, function(data) &#123;</span><br><span class="line">    console.log(&quot;end&quot;);</span><br><span class="line">    console.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯è‡ªå®šä¹‰Readableçš„æœ€ç®€å•çš„ä¸€ä¸ªä¾‹å­äº†ã€‚</p>
<ul>
<li>ä½¿ç”¨nodejsè‡ªå¸¦çš„util.inherits()æ¥å®ç°ç»§æ‰¿</li>
<li>ç»§æ‰¿Readableä¸€å®šè¦å®ç°_read()æ–¹æ³•ï¼Œå…¶ä¸­ä½¿ç”¨this.push()æ¥æ·»åŠ è¿™æ¬¡è¯»å–çš„å†…å®¹ï¼Œä½¿ç”¨this.push(null)è¡¨ç¤ºè¯»å–å®Œæ¯•</li>
</ul>
<p>è‡³äºå¦‚ä½•æ•´åˆåˆ°é¡¹ç›®ä¸­ï¼Œç›®å‰è§‰å¾—å…ˆä½¿ç”¨fs.readdir()æ¥å®ç°å³å¯ã€‚</p>
<p>tsçš„interfaceå¯ä»¥æœ‰é»˜è®¤å€¼ä¹ˆï¼Ÿ â€“ ä¸èƒ½</p>
<p>ä»Šæ—¥è¿›å±•ï¼š</p>
<p>![]ï¼ˆ/img/mmnote-2017-01-02-tree-demo.png)</p>
<h3 id="2017å¹´01æœˆ02æ—¥-æ˜ŸæœŸä¸€-æ ‘å½¢æ§ä»¶æ»šåŠ¨æ¡æ ·å¼"><a href="#2017å¹´01æœˆ02æ—¥-æ˜ŸæœŸä¸€-æ ‘å½¢æ§ä»¶æ»šåŠ¨æ¡æ ·å¼" class="headerlink" title="2017å¹´01æœˆ02æ—¥ æ˜ŸæœŸä¸€ æ ‘å½¢æ§ä»¶æ»šåŠ¨æ¡æ ·å¼"></a>2017å¹´01æœˆ02æ—¥ æ˜ŸæœŸä¸€ æ ‘å½¢æ§ä»¶æ»šåŠ¨æ¡æ ·å¼</h3><p>çœ‹Atomçš„æ»šåŠ¨æ¡æ ·å¼å‘ç°cssçš„é€‰æ‹©å™¨ä¸­å‡ºç°äº†<code>/deep/</code>è¿™ç§å†™æ³•ã€‚</p>
<p><a href="http://stackoverflow.com/questions/25609678/what-do-deep-and-shadow-mean-in-a-css-selector/25609679#25609679" target="_blank" rel="noopener">html5 - What do /deep/ and ::shadow mean in a CSS selector? - Stack Overflow</a></p>
<p>çœ‹æ¥æ˜¯ä¸ºäº†èƒ½å¤Ÿä¿®é¥°shadow domå†…éƒ¨è€Œç”Ÿçš„é€‰æ‹©å™¨ã€‚</p>
<hr>
<p>æ»šåŠ¨æ¡æ ·å¼ç›®å‰çœ‹æ¥æ²¡æœ‰åŒæ„å†™æ³•ï¼Œè¿˜å¥½æˆ‘ä»¬åªç”¨å†™webkitçš„ï¼š</p>
<p><a href="http://www.lyblog.net/detail/314.html" target="_blank" rel="noopener">è‡ªå®šä¹‰æµè§ˆå™¨æ»šåŠ¨æ¡çš„æ ·å¼ï¼Œæ‰“é€ å±äºä½ çš„æ»šåŠ¨æ¡é£æ ¼</a></p>
<p>ä¿®æ”¹äº†æ»šåŠ¨æ¡æ ·å¼çš„æ•ˆæœï¼š</p>
<p><img src="/img/mmnote-2017-01-02-tree-demo2.png" alt=""></p>
<hr>
<p>å‘ç°æ ‘æ§ä»¶ä¸­çš„é€‰ä¸­æ˜¯ä¸ªéº»çƒ¦äº‹ã€‚ç‚¹å‡»ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé€‰ä¸­å½“å‰ï¼Œä½†æ˜¯éœ€è¦æŠŠä¹‹å‰é€‰ä¸­çš„å–æ¶ˆé€‰ä¸­ï¼Œå¦‚æœæ”¯æŒå¤šé€‰ï¼Œå°±å¾—ç”¨ä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜äº†ã€‚</p>
<p>è€Œä¸”é€‰ä¸­åçš„é«˜äº®ä¹Ÿæ˜¯éº»çƒ¦äº‹ã€‚vscodeä¸­å› ä¸ºä¸æ˜¯æ•°ç»“æ„æ‰€ä»¥å¥½åšï¼Œä½†æ˜¯Atomä¸­å°±ä¸å®¹æ˜“äº†ï¼Œéœ€è¦ç”¨ä¸€ä¸ªå®šä½ä¸ºabsoluteçš„beforeä¼ªå…ƒç´ æ¥åšåˆ°ã€‚</p>
<hr>
<p>æœäº†ï¼Œjavascriptä¸­ç«Ÿç„¶æ²¡æœ‰æ¸…ç©ºæ•°ç»„çš„æ–¹æ³•ã€‚ã€‚ã€‚see <a href="http://stackoverflow.com/questions/1232040/how-do-i-empty-an-array-in-javascript" target="_blank" rel="noopener">How do I empty an array in JavaScript? - Stack Overflow</a></p>
<hr>
<p>æ¥ç€å°±æ˜¯å¼•å…¥code-mirroräº†ã€‚</p>
<p>å‚è€ƒé¡¹ç›®ï¼š<a href="https://github.com/JedWatson/react-codemirror" target="_blank" rel="noopener">JedWatson/react-codemirror: Codemirror Component for React.js</a></p>
<p><strong>æ³¨æ„</strong> CodeMirror.fromTextArea()è¿™ä¸ªæ–¹æ³•ï¼Œä¼šä½¿ç”¨textareaä¸­çš„å†…å®¹ï¼Œå¿½è§†ä¼ å…¥çš„valueå‚æ•°ã€‚</p>
<hr>
<p>é‡åˆ°ä¸€ä¸ªæ£˜æ‰‹é—®é¢˜ï¼Œcodemirrorå’Œflexå¸ƒå±€ç»“åˆï¼Œå¯¼è‡´å®½åº¦å¤„ç†ä¸å¯¹äº†ã€‚</p>
<p>è¢«æåäº†ï¼Œä¸€ä¸ªä¸‹åˆå°±èŠ±åœ¨codemirrorçš„linenumberä¸Šäº†ï¼Œæä¸æ‡‚æ–°å†™çš„ä¾‹å­éƒ½æ²¡é—®é¢˜ã€‚å°±æ˜¯è¿™ä¸ªé¡¹ç›®é‡Œé¢çš„æœ‰é—®é¢˜ã€‚</p>
<p>è¡¨ç°æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="../../img/mmnote-2017-01-02-codemirror-error.png" alt=""></p>
<p>å³è¾¹ç°è‰²çš„å…¨æ˜¯line numberã€‚ã€‚ã€‚å…ˆå›é¿è¿™ä¸ªé—®é¢˜å§ã€‚</p>
<p>ç›®å‰çš„æ•ˆæœï¼š</p>
<p><img src="/img/mmnote-2017-01-02-codemirror-demo.png" alt=""></p>
<p>ä¹çœ‹è¿˜ä¸é”™ğŸ˜ï¼Œä½†æ˜¯è¿˜å¾ˆä¸å®Œç¾ã€‚</p>
<hr>
<p>æ¥ä¸‹æ¥æ˜¯æƒ³å®ç°å¿«æ·é”®Ctrl+Sä¿å­˜çš„åŠŸèƒ½ã€‚</p>
<p>å­¦ä¹ <a href="https://zhuanlan.zhihu.com/p/20225295?columnSlug=FrontendMagazine" target="_blank" rel="noopener">ä½¿ç”¨ Electron æ„å»ºæ¡Œé¢åº”ç”¨ - å‰ç«¯å¤–åˆŠè¯„è®º - çŸ¥ä¹ä¸“æ </a></p>
<p>å…¶ä¸­æåˆ°äº†æ— æ ‡é¢˜æ çª—å£çš„åšæ³•ï¼Œå¯ä»¥åœ¨macä¸­åšå‡ºå¾ˆæ¼‚äº®çš„ç•Œé¢ï¼š</p>
<p><a href="http://electron.atom.io/docs/api/frameless-window/" target="_blank" rel="noopener">Frameless Window - Electron</a></p>
<p>è§‚å¯Ÿäº†ä¸€ä¸‹ï¼Œå‘ç°atomæ˜¯åŒ…å«ç³»ç»Ÿæ ‡é¢˜æ çš„ï¼Œè€Œvscodeåˆ™æ˜¯ä½¿ç”¨äº†<code>titleBarStyle: &#39;hidden&#39;</code>åŠ ä¸Šè‡ªå®šä¹‰çš„æ ‡é¢˜æ å®ç°çš„ã€‚</p>
<p><img src="/img/mmnote-2017-01-02-atom-title-bar.png" alt=""></p>
<p><img src="/img/mmnote-2017-01-02-vacode-title-bar.png" alt=""></p>
<p>åè€…å¯ä»¥è®©æ ‡é¢˜æ æˆä¸ºä¸»é¢˜å¯ä»¥å®šåˆ¶çš„ä¸€éƒ¨åˆ†ï¼Œæ˜æ˜¾æ›´å¥½çœ‹äº†ã€‚ä¸çŸ¥é“windowsåº•ä¸‹æ˜¯å¦‚ä½•è¡¨ç°çš„ã€‚</p>
<hr>
<p>ipcåŸæ¥æ˜¯é€šè¿‡onå’Œsendæ¥äº¤äº’çš„ï¼Œç”¨èµ·æ¥å¾ˆç®€å•ã€‚</p>
<p>è¢«å‘äº†ä¸€æ³¢ã€‚<code>var ipc = require(&#39;ipc&#39;);</code>è¿™ç§å†™æ³•æ˜¯è¿‡æ—¶çš„ï¼Œæ–°çš„å†™æ³•æ˜¯ï¼š<code>const {ipcMain} = require(&#39;electron&#39;)</code></p>
<p><a href="http://electron.atom.io/docs/api/ipc-main/" target="_blank" rel="noopener">ipcMain - Electron</a></p>
<h3 id="2017å¹´01æœˆ04æ—¥-æ˜ŸæœŸä¸‰-IPC"><a href="#2017å¹´01æœˆ04æ—¥-æ˜ŸæœŸä¸‰-IPC" class="headerlink" title="2017å¹´01æœˆ04æ—¥ æ˜ŸæœŸä¸‰ IPC"></a>2017å¹´01æœˆ04æ—¥ æ˜ŸæœŸä¸‰ IPC</h3><p>é‡åˆ°é”™è¯¯<code>Cannot find name &#39;Promise&#39;</code>ï¼Œéœ€è¦æŠŠtypescriptçš„targetæ”¹æˆes1.6</p>
<p><a href="http://stackoverflow.com/questions/39116687/error-ts2304-cannot-find-name-promise" target="_blank" rel="noopener">node.js - error TS2304: Cannot find name â€˜Promiseâ€™ - Stack Overflow</a></p>
<p>ã€Šelectronå­¦ä¹ ç¬”è®°ã€‹ï¼Œæ·»åŠ IPCç« èŠ‚ã€‚</p>
<h3 id="2017å¹´01æœˆ07æ—¥-æ˜ŸæœŸå…­-å¿«æ·é”®-å‘½ä»¤æ¡†æ¶"><a href="#2017å¹´01æœˆ07æ—¥-æ˜ŸæœŸå…­-å¿«æ·é”®-å‘½ä»¤æ¡†æ¶" class="headerlink" title="2017å¹´01æœˆ07æ—¥ æ˜ŸæœŸå…­ å¿«æ·é”® å‘½ä»¤æ¡†æ¶"></a>2017å¹´01æœˆ07æ—¥ æ˜ŸæœŸå…­ å¿«æ·é”® å‘½ä»¤æ¡†æ¶</h3><p>å¦‚ä½•ä¸ºç¨‹åºæ·»åŠ å¿«æ·é”®å‘¢ï¼ˆéå…¨å±€å¿«æ·é”®ï¼‰ï¼Ÿ</p>
<p>vscodeçš„å¿«æ·é”®è®¾ç½®æ ¼å¼æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123; &quot;key&quot;: &quot;cmd+delete&quot;, &quot;command&quot;: &quot;deleteAllRight&quot;,</span><br><span class="line">                       &quot;when&quot;: &quot;editorTextFocus &amp;&amp; !editorReadonly&quot; &#125;,</span><br></pre></td></tr></table></figure>
<p>ä¸€ä¸ªå¿«æ·é”®ç»‘å®šäº†ä¸€ä¸ªå‘½ä»¤ï¼ŒåŒæ—¶whenæŒ‡å®šäº†å¿«æ·é”®ç”Ÿæ•ˆçš„å‰ææ¡ä»¶ã€‚æ¡ä»¶ç”±å‡ ä¸ªboolå˜é‡æ„æˆã€‚</p>
<p>è€Œä¸€å¦‚æ—¢å¾€ï¼ŒAtomçš„è®¾è®¡æ›´ä¸ºå¹æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&apos;atom-text-editor&apos;:</span><br><span class="line">  &apos;ctrl-b&apos;: &apos;typescript:go-to-declaration&apos;</span><br><span class="line"></span><br><span class="line">&apos;atom-text-editor[data-grammar=&quot;source gfm&quot;]:not([mini])&apos;:</span><br><span class="line">  &apos;tab&apos;:        &apos;markdown-folder:dwim-toggle&apos;</span><br><span class="line">  &apos;alt-c&apos;:      &apos;markdown-folder:cycle&apos;</span><br></pre></td></tr></table></figure>
<p>ç±»ä¼¼cssé€‰æ‹©å™¨çš„å†™æ³•ï¼Œæ›´åŠ å¼ºå¤§ã€‚</p>
<p>æˆ‘å‘ç°å¥½å‡ ä¸ªåœ°æ–¹çš„è®¾è®¡éƒ½æ˜¯å¦‚ä½•ï¼ŒAtomçš„è®¾è®¡æ›´åŠ å‰å«ã€‚å¯æƒœä»£ç è´¨é‡æ²¡æœ‰å¤§ç¥æ¥ç›‘ç£ï¼Œå¯¼è‡´åœ¨æ€§èƒ½ä¸Šè´¥äº†ã€‚åŒæ—¶é€‰å‹coffeescriptä¹Ÿæ˜¯ä¸ªç™½ç—´é€‰æ‹©ã€‚</p>
<hr>
<p>ä¸Šé¢ä¸¤ä¸ªæ˜¯ç‹ç‰Œï¼Œæœ€æ±‚æœ€é«˜å¯å®šåˆ¶ã€‚è€Œæ™®é€šè½¯ä»¶æ˜¯å¦‚ä½•åšçš„å‘¢ï¼Ÿ</p>
<p>electronæœ¬èº«ä½¿ç”¨MenuItemä¸­çš„clickå±æ€§æ¥å®šä¹‰èœå•ç‚¹å‡»åæ‰§è¡Œçš„ä»£ç ã€‚æˆ‘çœ‹äº†Abricotineè¿™æ¬¾ç¬”è®°è½¯ä»¶çš„å®ç°ï¼Œä»–åœ¨èœå•templateä¸­æ·»åŠ äº†å‡ ä¸ªè‡ªå®šä¹‰å­—æ®µï¼Œæ¯”å¦‚platformï¼Œcommandã€‚ç„¶ååœ¨æ–°å»ºèœå•ä¹‹å‰ï¼Œå¤„ç†ä¸€étemplateï¼Œæ¯”å¦‚æ£€æŸ¥å½“å‰å¹³å°ï¼Œå¦‚æœä¸ç¬¦åˆï¼Œå°±éšè—ä¸€äº›èœå•é¡¹ã€‚ç„¶åæŠŠæ‰€æœ‰çš„commandç¿»è¯‘ä¸ºå¯¹åº”çš„clickå‡½æ•°ï¼Œä½¿ç”¨å…¶é¡¶çº§Applicationç±»æ¥æ‰§è¡Œå‘½ä»¤ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// å¤„ç†templateä¸­çš„æ¯ä¸ªitem</span><br><span class="line"></span><br><span class="line">// æŠŠcommandç¿»è¯‘ä¸ºclickå‡½æ•°ï¼Œå§”æ‰˜ç»™sendCommand</span><br><span class="line">// sendCommandçš„å®šä¹‰æ˜¯ï¼švar sendCommand = abrApp.execCommand.bind(abrApp)</span><br><span class="line">if (item.command) &#123;</span><br><span class="line">    item.click = (function (command, parameters) &#123;</span><br><span class="line">        return function () &#123; sendCommand(command, parameters); &#125;;</span><br><span class="line">    &#125;)(item.command, item.parameters);</span><br><span class="line">    item.id = item.command;</span><br><span class="line">    delete item.command;</span><br><span class="line">    delete item.parameters;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// å¯¹äºèœå•çš„çŠ¶æ€ï¼Œè¿˜å¯ä»¥æ ¹æ®é…ç½®æ–‡ä»¶æ¥æ›´æ–°</span><br><span class="line">if (item.type === &quot;checkbox&quot; &amp;&amp; typeof item.checked === &quot;string&quot;) &#123;</span><br><span class="line">    item.checked = getConfig(config, item.checked);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘è§‰å¾—è¿™ä¸ªè®¾è®¡éå¸¸å€¼å¾—å­¦ä¹ ã€‚ç”¨å‘½ä»¤æ¥ç»„ç»‡è¿™äº›æ“ä½œï¼Œä¹Ÿæ˜¯æ‰€æœ‰ç¼–è¾‘å™¨çš„è®¾è®¡ï¼Œè¿™æ ·ç”¨æˆ·ä¹Ÿå¯ä»¥åœ¨å‘½ä»¤é¢æ¿ä¸­æ‰§è¡Œã€‚</p>
<hr>
<p>Abricotineä¸­æ˜¯å¦‚ä½•execå‘½ä»¤çš„å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">execCommand: function (command, parameters) &#123;</span><br><span class="line">    // å‘é€å‘½ä»¤åˆ°å½“å‰æ¿€æ´»çš„çª—å£</span><br><span class="line">    var win = BrowserWindow.getFocusedWindow();</span><br><span class="line">    if (win) &#123;</span><br><span class="line">        // ä½¿ç”¨IPCå‘é€å‘½ä»¤</span><br><span class="line">        return win.webContents.send(&quot;command&quot;, command, parameters);</span><br><span class="line">    &#125;</span><br><span class="line">    // if no window, run a command from commands-main.js</span><br><span class="line">    if (commands &amp;&amp; commands[command]) &#123;</span><br><span class="line">        commands[command](this, parameters);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.error(&quot;Unknown command &apos;&quot; + command + &quot;&apos;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç­”æ¡ˆæ˜¯é€šè¿‡IPCå‘é€å‘½ä»¤å¸¦å¯¹åº”çš„windowæ¥æ‰§è¡Œã€‚åœ¨renderè¿›ç¨‹ä»£ç ä¸­ï¼Œå®šä¹‰commandåˆ—è¡¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">var commands = &#123;</span><br><span class="line"></span><br><span class="line">    new: function(win, abrDoc, cm) &#123;</span><br><span class="line">        abrDoc.new();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    open: function(win, abrDoc, cm) &#123;</span><br><span class="line">        abrDoc.open();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// æ‰§è¡Œå‘½ä»¤</span><br><span class="line">execCommand: function (command, parameters) &#123;</span><br><span class="line">    var win = remote.getCurrentWindow(),</span><br><span class="line">        abrDoc = this;</span><br><span class="line">    if (commands &amp;&amp; commands[command]) &#123;</span><br><span class="line">        commands[command](win, abrDoc, abrDoc.cm, parameters);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        console.error(&quot;Unknown command &apos;&quot; + command + &quot;&apos;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<hr>
<p>ã€Šelectronå­¦ä¹ ç¬”è®°ã€‹ï¼Œæ·»åŠ å¯¹è¯æ¡†ï¼Œèœå•ï¼Œå¿«æ·é”®ï¼Œshellç« èŠ‚ã€‚</p>
<hr>
<p>æ–°å»ºã€ŠAbricotineæ˜¯å¦‚ä½•æ•´åˆCodeMirrorçš„ã€‹</p>
<h3 id="2017å¹´01æœˆ08æ—¥-æ˜ŸæœŸæ—¥-CodeMirroræ’ä»¶æœºåˆ¶"><a href="#2017å¹´01æœˆ08æ—¥-æ˜ŸæœŸæ—¥-CodeMirroræ’ä»¶æœºåˆ¶" class="headerlink" title="2017å¹´01æœˆ08æ—¥ æ˜ŸæœŸæ—¥ CodeMirroræ’ä»¶æœºåˆ¶"></a>2017å¹´01æœˆ08æ—¥ æ˜ŸæœŸæ—¥ CodeMirroræ’ä»¶æœºåˆ¶</h3><p>æ˜¨å¤©çŸ¥é“äº†Abricotineçš„é‚£äº›â€œç‰¹æ•ˆâ€æ˜¯é€šè¿‡CodeMirroræ’ä»¶å®ç°çš„ã€‚ä»Šå¤©æ¥äº†è§£ä¸€ä¸‹å¦‚ä½•å†™CodeMirroræ’ä»¶ã€‚</p>
<p>ã€ŠCodeMirrorä½¿ç”¨ç¬”è®°ã€‹æ·»åŠ â€œæ‰©å±•CodeMirrorâ€ç« èŠ‚</p>
<p>ã€ŠAbricotineæ˜¯å¦‚ä½•æ•´åˆCodeMirrorçš„ã€‹å®Œå–„</p>
<h3 id="2017å¹´01æœˆ14æ—¥-æ˜ŸæœŸå…­-å®Œå–„é¡¹ç›®æ­å»º"><a href="#2017å¹´01æœˆ14æ—¥-æ˜ŸæœŸå…­-å®Œå–„é¡¹ç›®æ­å»º" class="headerlink" title="2017å¹´01æœˆ14æ—¥ æ˜ŸæœŸå…­ å®Œå–„é¡¹ç›®æ­å»º"></a>2017å¹´01æœˆ14æ—¥ æ˜ŸæœŸå…­ å®Œå–„é¡¹ç›®æ­å»º</h3><p>ã€Šnode.jsæ–°çš„åŒ…ç®¡ç†å™¨ - yarnã€‹å®Œæˆã€‚</p>
<p>ã€Šä½¿ç”¨yeomanåˆ›å»ºé¡¹ç›®ç”Ÿæˆå™¨ã€‹å®Œæˆã€‚</p>
<h3 id="2017å¹´01æœˆ15æ—¥-æ˜ŸæœŸæ—¥-å·¥ä½œæµå‡çº§-gulp-electron-connect-mocha"><a href="#2017å¹´01æœˆ15æ—¥-æ˜ŸæœŸæ—¥-å·¥ä½œæµå‡çº§-gulp-electron-connect-mocha" class="headerlink" title="2017å¹´01æœˆ15æ—¥ æ˜ŸæœŸæ—¥ å·¥ä½œæµå‡çº§ gulp electron-connect mocha"></a>2017å¹´01æœˆ15æ—¥ æ˜ŸæœŸæ—¥ å·¥ä½œæµå‡çº§ gulp electron-connect mocha</h3><p>keywordï¼š </p>
<ul>
<li>å­¦ä¹ vscode debugè®¾ç½®</li>
<li>å­¦ä¹ mocha/chaiï¼Œä¸typescriptç»“åˆ</li>
<li>å­¦ä¹ gulpï¼Œè®¾è®¡å·¥ä½œæµæ•´åˆ</li>
<li>gulpæ•´åˆwebpack+electron-connect<ul>
<li>watchä¸»è¿›ç¨‹ä»£ç ï¼Œä½¿ç”¨gulp-typescriptç¼–è¯‘ä¸»è¿›ç¨‹ä»£ç ï¼Œrestart electron</li>
<li>watchæ¸²æŸ“è¿›ç¨‹ä»£ç ï¼Œä½¿ç”¨webpack-streamç¼–è¯‘æ¸²æŸ“è¿›ç¨‹ä»£ç ï¼Œreload electron</li>
</ul>
</li>
<li>gulpç”Ÿæˆtypescript<ul>
<li>ç”Ÿæˆtsçš„sourcemapçš„é…ç½® <a href="https://github.com/floridoo/gulp-sourcemaps#write-options" target="_blank" rel="noopener">floridoo/gulp-sourcemaps: Source map support for Gulp.js</a></li>
<li>å¦‚ä½•ä½¿ç”¨vscodeæ¥è°ƒè¯• <a href="http://stackoverflow.com/questions/37477139/how-to-debug-a-gulp-task-with-vscode" target="_blank" rel="noopener">debugging - How to debug a gulp task with VSCode - Stack Overflow</a></li>
</ul>
</li>
<li>gulp testä»»åŠ¡<ul>
<li>ä½¿ç”¨gulp-typescriptç¼–è¯‘renderä»£ç ï¼Œå’Œtestä»£ç åˆ°test-outä¸­</li>
<li>æ‹·è´test-resåˆ°test-outä¸­å»</li>
<li>æ‰§è¡Œæµ‹è¯•</li>
</ul>
</li>
</ul>
<p>äº†è§£åˆ°çš„åº“ï¼š</p>
<ul>
<li>ä½¿fsç­‰æ ‡å‡†åº“æ”¯æŒpromiseï¼š<a href="https://github.com/normalize/mz" target="_blank" rel="noopener">normalize/mz: modernize node.js to current ECMAScript standards</a></li>
</ul>
<p>å­¦ä¹ åˆ°çš„è¯­æ³•ï¼š</p>
<ul>
<li>tsä¸æ”¯æŒé‡è½½</li>
<li>interfaceä¸æ”¯æŒé»˜è®¤å€¼</li>
</ul>
<h3 id="2017å¹´01æœˆ18æ—¥-æ˜ŸæœŸä¸‰-æ›´æ–°ä»£ç ç»“æ„-main-render-test"><a href="#2017å¹´01æœˆ18æ—¥-æ˜ŸæœŸä¸‰-æ›´æ–°ä»£ç ç»“æ„-main-render-test" class="headerlink" title="2017å¹´01æœˆ18æ—¥ æ˜ŸæœŸä¸‰ æ›´æ–°ä»£ç ç»“æ„ main render test"></a>2017å¹´01æœˆ18æ—¥ æ˜ŸæœŸä¸‰ æ›´æ–°ä»£ç ç»“æ„ main render test</h3><p>æ›´æ–°äº†ç›®å½•ç»“æ„ï¼Œä»£ç éƒ½æ”¾åœ¨srcä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ src ä»£ç ç›®å½•</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ common å…¬ç”¨ä»£ç </span><br><span class="line">â”‚Â Â  â”œâ”€â”€ main ä¸»è¿›ç¨‹ä»£ç </span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ res èµ„æºæ–‡ä»¶</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ application.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ main.ts å…¥å£æ–‡ä»¶</span><br><span class="line">â”‚Â Â  â”‚Â Â  â”œâ”€â”€ menu.ts</span><br><span class="line">â”‚Â Â  â”‚Â Â  â””â”€â”€ window.ts</span><br><span class="line">â”‚Â Â  â””â”€â”€ render æ¸²æŸ“è¿›ç¨‹ä»£ç </span><br><span class="line">â”‚Â Â      â”œâ”€â”€ component reactç»„ä»¶</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ res èµ„æºæ–‡ä»¶</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ service</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ util</span><br><span class="line">â”‚Â Â      â”œâ”€â”€ index.less</span><br><span class="line">â”‚Â Â      â””â”€â”€ index.tsx</span><br><span class="line">â”œâ”€â”€ test æµ‹è¯•ä»£ç ç›®å½•</span><br><span class="line">â”‚Â Â  â”œâ”€â”€ res æµ‹è¯•èµ„æºç›®å½•</span><br><span class="line">â”‚Â Â  â””â”€â”€ tree-service.spec.ts </span><br><span class="line">â”œâ”€â”€ gulpfile.js</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ tsconfig.main.json ä¸»è¿›ç¨‹ç”¨çš„tsconfig</span><br><span class="line">â”œâ”€â”€ tsconfig.render.json æ¸²æŸ“è¿›ç¨‹ç”¨çš„tsconfig</span><br><span class="line">â”œâ”€â”€ tsconfig.test.json æµ‹è¯•ä»£ç ç”¨çš„tsconfig</span><br><span class="line">â”œâ”€â”€ webpack.config.js</span><br><span class="line">â””â”€â”€ yarn.lock</span><br></pre></td></tr></table></figure>
<p>é¡¹ç›®ç»“æ„æ¯”è¾ƒå¤æ‚äº†ï¼Œæœ‰ä¸‰ä¸ªéƒ¨åˆ†çš„ä»£ç ï¼šmainï¼Œrenderï¼Œtestã€‚ä¸‰ä¸ªéƒ¨åˆ†å„æœ‰äº¤é›†ï¼Œä½†æ˜¯åœ¨ç”Ÿæˆä¸Šçš„è§„åˆ™åˆæœ‰äº›ä¸ä¸€æ ·ã€‚</p>
<ul>
<li>mainï¼šä½¿ç”¨gulp-typescriptç¼–è¯‘main/commonçš„ä»£ç ï¼Œå¹¶è¾“å‡ºåˆ°dist</li>
<li>renderï¼šä½¿ç”¨webpack-streamæ‰“åŒ…render/commonçš„ä»£ç ï¼Œå¹¶è¾“å‡ºåˆ°dist</li>
<li>testï¼šä½¿ç”¨gulp-typescriptç¼–è¯‘main/render/commonçš„ä»£ç ï¼Œå¹¶è¾“å‡ºåˆ°test-outï¼Œæ‰§è¡Œæµ‹è¯•</li>
</ul>
<p>ç›®å‰gulpçš„å®Œç¾å†™æ³•ä¸ºï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mainCode = [<span class="string">'src/main/**/*.ts*'</span>, <span class="string">'src/common/**/*.ts*'</span>];</span><br><span class="line"><span class="keyword">const</span> renderCode = [<span class="string">'src/render/**/*.ts*'</span>, <span class="string">'src/common/**/*.ts*'</span>];</span><br><span class="line"><span class="keyword">const</span> webpackConfig = <span class="built_in">require</span>(<span class="string">'./webpack.config.js'</span>);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'main'</span>, [], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(mainCode, &#123; <span class="attr">base</span>: <span class="string">"./"</span> &#125;)</span><br><span class="line">        .pipe(tsMainProject())</span><br><span class="line">        .js.pipe(gulp.dest(<span class="string">"dist"</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'main-w'</span>, [<span class="string">'main'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.watch(mainCode, [<span class="string">'main'</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">webpackTask</span>(<span class="params">watch</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'src/render/index.tsx'</span>)</span><br><span class="line">        .pipe(webpack(_.merge(webpackConfig, &#123; <span class="attr">watch</span>: watch &#125;), <span class="literal">null</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, stat</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"webpack error: "</span>, err);</span><br><span class="line">        &#125;).on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// fix issue https://github.com/shama/webpack-stream/issues/34</span></span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"webpack task error:"</span>, err);</span><br><span class="line">            <span class="comment">// this.emit('end');</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">"./dist"</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'webpack'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">cb</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> webpackTask(<span class="literal">false</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'webpack-w'</span>, [<span class="string">'webpack'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    webpackTask(<span class="literal">true</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">gulp.task(<span class="string">'all-w'</span>, [<span class="string">'main-w'</span>, <span class="string">'webpack-w'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ<code>gulp all-w</code>å°±èƒ½è‡ªåŠ¨ç›‘è§†ç¼–è¯‘mainå’Œrenderçš„ä»£ç ï¼Œç®€ç›´çˆ½ã€‚</p>
<h3 id="2017å¹´01æœˆ19æ—¥-æ˜ŸæœŸå››-åœ¨electronä¸­å®‰è£…è°ƒè¯•æ’ä»¶"><a href="#2017å¹´01æœˆ19æ—¥-æ˜ŸæœŸå››-åœ¨electronä¸­å®‰è£…è°ƒè¯•æ’ä»¶" class="headerlink" title="2017å¹´01æœˆ19æ—¥ æ˜ŸæœŸå›› åœ¨electronä¸­å®‰è£…è°ƒè¯•æ’ä»¶"></a>2017å¹´01æœˆ19æ—¥ æ˜ŸæœŸå›› åœ¨electronä¸­å®‰è£…è°ƒè¯•æ’ä»¶</h3><p>å‚è€ƒ<a href="https://github.com/chentsulin/electron-react-boilerplate" target="_blank" rel="noopener">chentsulin/electron-react-boilerplate</a>å®‰è£…ä¸€ä¸‹æ’ä»¶ï¼š</p>
<ul>
<li>Devtron - Electronå®˜æ–¹æä¾›çš„è°ƒè¯•æ’ä»¶ - Install via electron-debug.</li>
<li>React Developer Tools - Reactå®˜æ–¹æä¾›çš„è°ƒè¯•æ’ä»¶ - Install via electron-devtools-installer.</li>
<li>Redux DevTools - Reduxè°ƒè¯•æ’ä»¶ - Install via electron-devtools-installer.</li>
</ul>
<p>ä½¿ç”¨<a href="https://github.com/MarshallOfSound/electron-devtools-installer" target="_blank" rel="noopener">MarshallOfSound/electron-devtools-installer</a>åœ¨Electronä¸­å®‰è£…è°ƒè¯•æ’ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">installChromeExtensions</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (process.env.NODE_ENV === constant.env.nodeEnv.development) &#123;</span><br><span class="line">    <span class="keyword">const</span> installer = <span class="built_in">require</span>(<span class="string">'electron-devtools-installer'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> extensions = [</span><br><span class="line">      <span class="string">'REACT_DEVELOPER_TOOLS'</span>,</span><br><span class="line">      <span class="string">'REDUX_DEVTOOLS'</span></span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> forceDownload = !!process.env.UPGRADE_EXTENSIONS;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"start to install debug extensions...."</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span></span><br><span class="line">      .all(extensions.map(<span class="function"><span class="params">name</span> =&gt;</span> installer.default(installer[name], forceDownload)))</span><br><span class="line">      .then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"install debug extensions finish"</span>);</span><br><span class="line">      &#125;).catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"install debug extensions error:"</span> + err);</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨app readyåè°ƒç”¨å³å¯ã€‚å®‰è£…éœ€è¦ç¿»å¢™ã€‚å®‰è£…åå°±ä¸ä¼šå†å®‰è£…äº†ï¼Œè®¾ç½®<code>UPGRADE_EXTENSIONS</code>å¯ä»¥å¼ºåˆ¶æ›´æ–°ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ UPGRADE_EXTENSIONS=1 npm run dev</span><br><span class="line"></span><br><span class="line"># For Windows</span><br><span class="line">$ set UPGRADE_EXTENSIONS=1 &amp;&amp; npm run dev</span><br></pre></td></tr></table></figure>
<p>ç„¶åå’±</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev devtron</span><br><span class="line"></span><br><span class="line">require(&apos;devtron&apos;).install()</span><br></pre></td></tr></table></figure>
<h3 id="2017å¹´01æœˆ23æ—¥-æ˜ŸæœŸä¸€-react-redux"><a href="#2017å¹´01æœˆ23æ—¥-æ˜ŸæœŸä¸€-react-redux" class="headerlink" title="2017å¹´01æœˆ23æ—¥ æ˜ŸæœŸä¸€ react-redux"></a>2017å¹´01æœˆ23æ—¥ æ˜ŸæœŸä¸€ react-redux</h3><p>å­¦ä¹ react-reduxã€‚å¤§è‡´çœ‹äº†reduxçš„ä»£ç ï¼Œä»£ç çœŸå¿ƒå°‘ã€‚ä½†æ˜¯å­¦ä¹ èµ·æ¥å´è¿™ä¹ˆä¸å®¹æ˜“ã€‚ã€‚ã€‚ã€‚</p>
<p>è€Œä¸”è¿˜å¯ä»¥å¾ˆå¼ºå¤§ã€‚æˆ–è®¸è¿™å°±æ˜¯UNIXè®¾è®¡è‰ºæœ¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹è¯ã€‚</p>
<p>ç»“åˆè°ƒè¯•æ‰©å±•ï¼ŒçœŸæ˜¯å¯ä»¥åœ¨åº”ç”¨çŠ¶æ€ä¸­è¿›è¡Œæ—¶é—´æ—…è¡Œï¼š</p>
<ul>
<li><a href="https://github.com/gaearon/redux-devtools" target="_blank" rel="noopener">redux-devtools</a></li>
<li><a href="http://www.jianshu.com/p/a2d4c1856560" target="_blank" rel="noopener">Redux-devToolsç®€å•çš„ä½¿ç”¨ - ç®€ä¹¦</a></li>
</ul>
<p>ä½†æ˜¯ä¸å¾—ä¸è¯´ï¼Œçš„ç¡®å¾ˆéš¾æ¶ˆåŒ–ï¼Œæˆ‘ç°åœ¨è¿˜æ˜¯æ— æ³•ç”¨å…¶å¼€å§‹å†™mmnoteã€‚</p>
<p>è¿˜æœ‰ï¼Œå¯¹äºstateï¼Œæ¯æ¬¡éƒ½è¦è¿”å›ä¸€ä¸ªæ–°çš„objectä¹ˆï¼Ÿ â€“ å¯¹çš„ã€‚</p>
<h3 id="2017å¹´01æœˆ24æ—¥-æ˜ŸæœŸäºŒ-immutable-js"><a href="#2017å¹´01æœˆ24æ—¥-æ˜ŸæœŸäºŒ-immutable-js" class="headerlink" title="2017å¹´01æœˆ24æ—¥ æ˜ŸæœŸäºŒ immutable.js"></a>2017å¹´01æœˆ24æ—¥ æ˜ŸæœŸäºŒ immutable.js</h3><p>immutable.jsæ˜¯jsä¸­çš„ä¸å¯å˜æ•°æ®ç±»å‹åº“ã€‚å…¶å®ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆéº»çƒ¦çš„ï¼Œå°¤å…¶æ˜¯è·å–åµŒå¥—çš„å±æ€§ã€‚</p>
<ul>
<li><a href="https://github.com/camsong/blog/issues/3" target="_blank" rel="noopener">Immutable è¯¦è§£åŠ React ä¸­å®è·µ Â· Issue #3 Â· camsong/blog</a></li>
<li><a href="https://www.sitepoint.com/how-to-build-a-todo-app-using-react-redux-and-immutable-js/" target="_blank" rel="noopener">How to Build a Todo App Using React, Redux, and Immutable.js</a></li>
</ul>
<p>Immutable.jså’Œreduxç»“åˆæœ‰äº›é—®é¢˜ï¼Œå› ä¸ºcombineReducersé’ˆå¯¹çš„æ˜¯æ™®é€šObjectã€‚</p>
<p>æœ‰ä¸€ä¸ªåº“å®ç°äº†é’ˆå¯¹immutable.jsçš„combineReducersï¼š</p>
<ul>
<li><a href="https://github.com/gajus/redux-immutable" target="_blank" rel="noopener">gajus/redux-immutable: redux-immutable is used to create an equivalent function of Redux combineReducers that works with Immutable.js state.</a></li>
</ul>
<p>jsçš„ä¸–ç•Œå°±æ˜¯å¦‚æ­¤ï¼Œè¿™ä¸ªåº“ä¹Ÿä¸è¿‡ä¸€ç™¾æ¥è¡Œï¼Œæœ‰800å¤šstartã€‚ã€‚ã€‚ã€‚</p>
<ul>
<li><a href="https://segmentfault.com/a/1190000004236064?utm_source=Weibo" target="_blank" rel="noopener">è§£è¯»reduxå·¥ä½œåŸç† - dry - SegmentFault</a></li>
</ul>
<h3 id="2017å¹´01æœˆ26æ—¥-æ˜ŸæœŸå››-å¼‚æ­¥action-ä½¿ç”¨æ²¡æœ‰ç±»å‹å®šä¹‰çš„åŒ…"><a href="#2017å¹´01æœˆ26æ—¥-æ˜ŸæœŸå››-å¼‚æ­¥action-ä½¿ç”¨æ²¡æœ‰ç±»å‹å®šä¹‰çš„åŒ…" class="headerlink" title="2017å¹´01æœˆ26æ—¥ æ˜ŸæœŸå›› å¼‚æ­¥action ä½¿ç”¨æ²¡æœ‰ç±»å‹å®šä¹‰çš„åŒ…"></a>2017å¹´01æœˆ26æ—¥ æ˜ŸæœŸå›› å¼‚æ­¥action ä½¿ç”¨æ²¡æœ‰ç±»å‹å®šä¹‰çš„åŒ…</h3><p>reduxçš„middlewareæœ‰å‡ ä¸ªé€‰æ‹©ï¼š</p>
<ul>
<li>æ ‡å‡†çš„åšæ³•æ˜¯ä½¿ç”¨ Redux Thunk middlewareã€‚è¦å¼•å…¥ redux-thunk è¿™ä¸ªä¸“é—¨çš„åº“æ‰èƒ½ä½¿ç”¨ã€‚æˆ‘ä»¬åé¢ä¼šä»‹ç» middleware å¤§ä½“ä¸Šæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼›ç›®å‰ï¼Œä½ åªéœ€è¦çŸ¥é“ä¸€ä¸ªè¦ç‚¹ï¼šé€šè¿‡ä½¿ç”¨æŒ‡å®šçš„ middlewareï¼Œaction åˆ›å»ºå‡½æ•°é™¤äº†è¿”å› action å¯¹è±¡å¤–è¿˜å¯ä»¥è¿”å›å‡½æ•°ã€‚è¿™æ—¶ï¼Œè¿™ä¸ª action åˆ›å»ºå‡½æ•°å°±æˆä¸ºäº† thunkã€‚</li>
<li>redux-promise æˆ–è€… redux-promise-middleware æ¥ dispatch Promise æ›¿ä»£å‡½æ•°ã€‚</li>
<li>redux-observable æ¥ dispatch Observableã€‚</li>
<li><p>redux-saga ä¸­é—´ä»¶æ¥åˆ›å»ºæ›´åŠ å¤æ‚çš„å¼‚æ­¥ actionã€‚</p>
</li>
<li><p><a href="https://www.youtube.com/watch?v=AslncyG8whg&amp;ab_channel=NetflixUIEngineering" target="_blank" rel="noopener">Netflix JavaScript Talks - RxJS + Redux + React = Amazing! - YouTube</a></p>
</li>
</ul>
<p>è¿™ä¸ªæ°´ä¹Ÿå¥½æ·±ï¼Œä¸æƒ³å†è¿™ä¸ªé˜¶æ®µå¤šèŠ±æ—¶é—´åœ¨ä¸Šé¢äº†ï¼Œé‡‡ç”¨æœ€ç®€å•åŸå§‹çš„<code>redux-thunk</code></p>
<p><code>isomorphic-fetch</code>è¿™ä¸ªåº“ä¸é”™ï¼Œç”¨èµ·æ¥ã€‚</p>
<hr>
<p>å¯¹äºä½¿ç”¨æ²¡æœ‰ç±»å‹å®šä¹‰çš„åŒ…ï¼Œä½¿ç”¨<code>index.d.ts</code>ï¼Œç„¶åç®€å•çš„å†™ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">declare module &apos;redux-devtools-chart-monitor&apos;;</span><br><span class="line">declare module &apos;redux-devtools-diff-monitor&apos;;</span><br><span class="line">declare module &apos;redux-devtools-inspector&apos;;</span><br></pre></td></tr></table></figure>
<p>ç„¶å<code>/// &lt;reference path=&quot;./index.d.ts&quot; /&gt;</code></p>
<p>2017å¹´01æœˆ28æ—¥ åˆä¸€ codemirror å‰ªè´´æ¿å›¾ç‰‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">mod</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> exports == <span class="string">"object"</span> &amp;&amp; <span class="keyword">typeof</span> <span class="built_in">module</span> == <span class="string">"object"</span>) <span class="comment">// CommonJS</span></span><br><span class="line">    mod(<span class="built_in">require</span>(<span class="string">"../../lib/codemirror"</span>), <span class="built_in">require</span>(<span class="string">"../markdown/markdown"</span>), <span class="built_in">require</span>(<span class="string">"../../addon/mode/overlay"</span>));</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> define == <span class="string">"function"</span> &amp;&amp; define.amd) <span class="comment">// AMD</span></span><br><span class="line">    define([<span class="string">"../../lib/codemirror"</span>, <span class="string">"../markdown/markdown"</span>, <span class="string">"../../addon/mode/overlay"</span>], mod);</span><br><span class="line">  <span class="keyword">else</span> <span class="comment">// Plain browser env</span></span><br><span class="line">    mod(CodeMirror);</span><br><span class="line">&#125;)(<span class="function"><span class="keyword">function</span>(<span class="params">CodeMirror</span>) </span>&#123;</span><br></pre></td></tr></table></figure>
<p>é™¤äº†åŸå§‹æµè§ˆå™¨ç¯å¢ƒï¼Œå…¶ä»–ç¯å¢ƒä¸­å¼•å…¥gfm modeå°±ä¼šè‡ªåŠ¨å¼•å…¥ä¾èµ–çš„markdown modeå’Œoverlayæ’ä»¶ã€‚</p>
<p>å…ˆä¸å¼„æ ‘æ§ä»¶äº†ï¼Œä½œä¸ºä¸€ä¸ªæ’ä»¶å®ç°å§(?)ã€‚</p>
<p>æ¥ä¸‹æ¥åšè·å–å‰ªè´´æ¿å›¾ç‰‡ã€‚</p>
<ul>
<li>è¿™ç¯‡æ–‡ç« ä¸­CMä½œè€…ä½¿ç”¨changeäº‹ä»¶å¤„ç†ç²˜è´´æ–‡å­—çš„åšæ³•å€¼å¾—å­¦ä¹  <a href="https://github.com/codemirror/CodeMirror/issues/2120" target="_blank" rel="noopener">Paste with indent? Â· Issue #2120 Â· codemirror/CodeMirror</a></li>
</ul>
<p>ä½¿ç”¨changeå¯¹è±¡çš„origin===â€™pasteâ€™æ¥å¤„ç†ç²˜è´´çš„åœºæ™¯ã€‚ä½†æ˜¯ç²˜è´´å›¾ç‰‡ä¸ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/input/input.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">handlePaste</span>(<span class="params">e, cm</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> pasted = e.clipboardData &amp;&amp; e.clipboardData.getData(<span class="string">"Text"</span>)</span><br><span class="line">  <span class="keyword">if</span> (pasted) &#123;</span><br><span class="line">    e.preventDefault()</span><br><span class="line">    <span class="keyword">if</span> (!cm.isReadOnly() &amp;&amp; !cm.options.disableInput)</span><br><span class="line">      runInOp(cm, () =&gt; applyTextInput(cm, pasted, <span class="number">0</span>, <span class="literal">null</span>, <span class="string">"paste"</span>))</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CMçš„é»˜è®¤å¤„ç†ï¼Œå¦‚æœä¸æ˜¯æ–‡å­—ï¼Œæ˜¯ä¸ä¼šæœ‰è¡Œä¸ºçš„ã€‚</p>
<p>å›¾ç‰‡æ‹–æ‹½ä¸Šä¼ æ’ä»¶ï¼š</p>
<ul>
<li>â­ï¸<a href="https://segmentfault.com/a/1190000007434697" target="_blank" rel="noopener">jsæ‹–æ‹½ç²˜è´´ä¸Šä¼ ä¸CodeMirror - å°å°æ‡’ç¾Šç¾ŠSFä¸“æ  - SegmentFault</a></li>
<li><a href="https://github.com/Rovak/InlineAttachment" target="_blank" rel="noopener">Rovak/InlineAttachment: Easily paste and upload files/images in plain textareas</a></li>
</ul>
<p>widget demoå€¼å¾—å­¦ä¹ ï¼š</p>
<ul>
<li><a href="https://codemirror.net/demo/widget.html" target="_blank" rel="noopener">CodeMirror: Inline Widget Demo</a></li>
</ul>
<p>å‚è€ƒä¸Šé¢çš„æ–‡ç« çŸ¥é“äº†åšæ³•ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">myCodeMirror.on(<span class="string">'paste'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">instance, e</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'paste'</span>,instance,e);</span><br><span class="line">    e.preventDefault();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">e.clipboardData.items[<span class="number">0</span>].getAsFile()</span><br><span class="line"><span class="comment">// =&gt; Blob &#123;size: 12312, type: "image/png"&#125;</span></span><br></pre></td></tr></table></figure>
<p>å¦‚ä½•ä¿å­˜Blobåˆ°æ–‡ä»¶ä¸­ï¼Ÿ</p>
<ul>
<li><a href="https://www.npmjs.com/package/blob-to-buffer" target="_blank" rel="noopener">blob-to-buffer</a></li>
</ul>
<p>ä½¿ç”¨è¿™ä¸ªåº“æŠŠblobè½¬ä¸ºbufferå³å¯ã€‚</p>
<p>åŒæ—¶å‘ç°äº†ä¾èµ–è¿™ä¸ªåº“çš„ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„é¡¹ç›®ï¼š</p>
<ul>
<li><a href="https://www.npmjs.com/package/blob-to-buffer" target="_blank" rel="noopener">blob-to-buffer</a></li>
</ul>
<p>åŸºäºCMçš„markdownç¼–è¾‘å™¨ï¼Œåšå¾—å¾ˆä¸é”™ï¼Œå¾ˆå¤šåœ°æ–¹éƒ½åœ¨ç”¨ï¼š</p>
<ul>
<li>â­ï¸<a href="https://github.com/NextStepWebs/simplemde-markdown-editor" target="_blank" rel="noopener">NextStepWebs/simplemde-markdown-editor: A simple, beautiful, and embeddable JavaScript Markdown editor. Delightful editing for beginners and experts alike. Features built-in autosaving and spell checking.</a></li>
</ul>
<hr>
<p>å¯ä»¥ä»å‰ªè´´æ¿ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°äº†ï¼Œä½†æ˜¯å›¾ç‰‡æ¸…æ™°åº¦ä¸å¤Ÿï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ï¼š</p>
<ul>
<li><a href="http://stackoverflow.com/questions/22135549/javascript-how-do-i-access-hi-dpi-retina-image-from-the-clipboard-on-a-paste-ev" target="_blank" rel="noopener">Javascript: How do I access Hi-DPI/Retina image from the clipboard on a paste event? - Stack Overflow</a></li>
</ul>
<p>ä½†æ˜¯æ²¡æœ‰å›ç­”ã€‚æˆ‘çœ‹äº†githubçš„markdownç¼–è¾‘æ§ä»¶ï¼Œä¸Šä¼ çš„å›¾ç‰‡æ˜¯é«˜æ¸…çš„ã€‚ã€‚ã€‚å¦‚ä½•åšåˆ°ã€‚</p>
<p>è¦è¢«æ•´ç–¯äº†ã€‚ã€‚ã€‚</p>
<p><img src="../../../img/2017-01-28-23-44-47.png" alt=""></p>
<h3 id="2017å¹´01æœˆ29æ—¥-æ˜ŸæœŸæ—¥"><a href="#2017å¹´01æœˆ29æ—¥-æ˜ŸæœŸæ—¥" class="headerlink" title="2017å¹´01æœˆ29æ—¥ æ˜ŸæœŸæ—¥"></a>2017å¹´01æœˆ29æ—¥ æ˜ŸæœŸæ—¥</h3><ul>
<li><a href="https://github.com/electron/electron/pull/7909" target="_blank" rel="noopener">Chrome 54 update by groundwater Â· Pull Request #7909 Â· electron/electron</a></li>
<li><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=355477" target="_blank" rel="noopener">355477 - Pasting images doesnâ€™t preserve original resolution - chromium - Monorail</a></li>
</ul>
<p>è¿™ä¸ªäººé—®çš„é—®é¢˜ä¸€æ¨¡ä¸€æ ·ã€‚éš¾é“è¿™ä¸ªé—®é¢˜è¿™ä¹ˆå¤šå¹´äº†æ²¡äººç®¡ï¼Ÿï¼Ÿï¼Ÿ</p>
<p>ç°åœ¨æˆ‘ç”¨çš„æµè§ˆå™¨æ˜¯55ï¼Œè€Œelectronä½¿ç”¨çš„æ˜¯53ã€‚ä¸‹è½½ä¸€ä¸ª53çš„chromeçœ‹çœ‹ã€‚</p>
<p>è€ç‰ˆæœ¬ç½‘å€ï¼š</p>
<ul>
<li><a href="http://google-chrome.en.uptodown.com/mac/old" target="_blank" rel="noopener">Google Chrome old versions - Mac</a></li>
<li><a href="http://filehippo.com/zh/mac/download_google_chrome_for_mac/history" target="_blank" rel="noopener">Google Chrome 56.0.2924.76-å†å² -FileHippo.com</a></li>
</ul>
<p>å…³é—­è‡ªåŠ¨æ›´æ–°ï¼š</p>
<ul>
<li><a href="http://support.imonggo.com/help/kb/advance-questions/how-to-install-a-previous-version-of-chrome-in-mac" target="_blank" rel="noopener">How to install a previous version of Chrome in Mac / Advanced Questions / Knowledge Base - Imonggo Support</a></li>
<li><a href="http://support.imonggo.com/help/kb/advance-questions/how-to-stop-google-chrome-from-auto-updates-for-mac" target="_blank" rel="noopener">How to Stop Google Chrome from Auto-Updates for Mac / Advanced Questions / Knowledge Base - Imonggo Support</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">defaults read com.google.Keystone.Agent checkInterval // =&gt; 18000</span><br><span class="line"></span><br><span class="line">å…³é—­ï¼š</span><br><span class="line">defaults write com.google.Keystone.Agent checkInterval 0</span><br></pre></td></tr></table></figure>
<p>æ§åˆ¶å°ä¸­æ£€æŸ¥ç‰ˆæœ¬ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">navigator.appVersion</span><br></pre></td></tr></table></figure>
<p>å®éªŒç½‘å€ï¼š<a href="http://jsfiddle.net/zd5pX/44/" target="_blank" rel="noopener">http://jsfiddle.net/zd5pX/44/</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Click this pane, and paste<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"img"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'html'</span>).bind(<span class="string">'paste'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e.preventDefault();</span><br><span class="line">    <span class="keyword">var</span> item = (e.clipboardData || e.originalEvent.clipboardData).items[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">var</span> type = item.type.split(<span class="string">'/'</span>).shift();</span><br><span class="line">    <span class="keyword">if</span> (type == <span class="string">"image"</span>)&#123;</span><br><span class="line">        <span class="keyword">var</span> file = item.getAsFile();</span><br><span class="line">        <span class="keyword">var</span> blob = URL.createObjectURL(file); <span class="comment">// Blob</span></span><br><span class="line">        <span class="built_in">document</span>.getElementById(<span class="string">'img'</span>).src = blob;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>ç»“è®ºï¼š55ç‰ˆæœ¬ä¸­æ‰ä¿®å¤ã€‚electronä¸‹ä¸ªç‰ˆæœ¬ä¸º1.5.0ï¼Œä½¿ç”¨çš„chromeç‰ˆæœ¬ä¸º54ã€‚ã€‚ã€‚ã€‚ç­‰å§ã€‚</p>
<h3 id="2017å¹´02æœˆ03æ—¥-æ˜ŸæœŸäº”-ç²˜è´´å›¾ç‰‡"><a href="#2017å¹´02æœˆ03æ—¥-æ˜ŸæœŸäº”-ç²˜è´´å›¾ç‰‡" class="headerlink" title="2017å¹´02æœˆ03æ—¥ æ˜ŸæœŸäº” ç²˜è´´å›¾ç‰‡"></a>2017å¹´02æœˆ03æ—¥ æ˜ŸæœŸäº” ç²˜è´´å›¾ç‰‡</h3><p>å®Œæˆç²˜è´´å›¾ç‰‡ï¼ç›®å‰ä½¿ç”¨çš„æ˜¯inline widgetï¼Œä¹‹åå†ä¼˜åŒ–åˆ«çš„å½¢å¼ã€‚</p>
<p><img src="/img/mmnote-can-paste-image.png" alt=""></p>
<p>ä¸‹ä¸€æ­¥æ˜¯å®æ—¶é¢„è§ˆã€‚ç„¶åæ˜¯å›¾ç‰‡å¯ä»¥åˆ é™¤ã€‚</p>
<h3 id="2017å¹´02æœˆ05æ—¥-æ˜ŸæœŸæ—¥"><a href="#2017å¹´02æœˆ05æ—¥-æ˜ŸæœŸæ—¥" class="headerlink" title="2017å¹´02æœˆ05æ—¥ æ˜ŸæœŸæ—¥"></a>2017å¹´02æœˆ05æ—¥ æ˜ŸæœŸæ—¥</h3><p>å­¦ä¹ Abricotineï¼Œä½¿ç”¨<code>is-url</code>æ¥åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯url</p>
<p>å½“å‰é—®é¢˜ï¼šmarkTextåï¼Œå…‰æ ‡æœ‰äº›é—®é¢˜</p>
<h3 id="2017å¹´02æœˆ08æ—¥-æ˜ŸæœŸä¸‰"><a href="#2017å¹´02æœˆ08æ—¥-æ˜ŸæœŸä¸‰" class="headerlink" title="2017å¹´02æœˆ08æ—¥ æ˜ŸæœŸä¸‰"></a>2017å¹´02æœˆ08æ—¥ æ˜ŸæœŸä¸‰</h3><blockquote>
<p>é—®é¢˜ï¼šmarkTextåï¼Œå…‰æ ‡æœ‰äº›é—®é¢˜</p>
</blockquote>
<p>è§£å†³ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> element = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span><br><span class="line">element.src = <span class="string">'file://'</span> + link;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> marker = doc.markText(<span class="keyword">from</span>, to, &#123;</span><br><span class="line">    replacedWith: element,</span><br><span class="line">    handleMouseEvents: <span class="literal">true</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">element.addEventListener(<span class="string">"load"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    marker.changed();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>éœ€è¦è°ƒç”¨<code>marker.changed()</code>ï¼Œè¿™æ ·CMä¼šæ›´å…·å½“å‰markerçš„å¤§å°æ¥æ›´æ–°ç¼–è¾‘å™¨ä»¥åŠå…‰æ ‡ã€‚</p>
<ul>
<li><a href="https://blog.mariusschulz.com/2015/11/13/typing-destructured-object-parameters-in-typescript" target="_blank" rel="noopener">Typing Destructured Object Parameters in TypeScript | Marius Schulz</a></li>
</ul>
<p>å½“å‰ä»»åŠ¡ï¼š[task-11]é”™è¯¯çš„å›¾ç‰‡é€»è¾‘ï¼š</p>
<ol>
<li>æ ‡çº¢</li>
<li>ç¼–è¾‘è¿‡ç¨‹ä¸­å¦‚æœä¸åœ¨æ»¡è¶³å›¾ç‰‡è¯­æ³•ï¼Œåˆ™é€€åŒ–ä¸ºæ™®é€šæ–‡æœ¬</li>
<li>ç¼–è¾‘è¿‡ç¨‹ä¸­å¦‚æœå›¾ç‰‡åˆæ³•äº†ï¼Œåˆ™æ¸²æŸ“ä¸ºå›¾ç‰‡</li>
</ol>
<h3 id="2017å¹´02æœˆ09æ—¥-æ˜ŸæœŸå››-åˆ—è¡¨è¡¥å…¨-æ ‡é¢˜å¤§å°åŒºåˆ†"><a href="#2017å¹´02æœˆ09æ—¥-æ˜ŸæœŸå››-åˆ—è¡¨è¡¥å…¨-æ ‡é¢˜å¤§å°åŒºåˆ†" class="headerlink" title="2017å¹´02æœˆ09æ—¥ æ˜ŸæœŸå›› åˆ—è¡¨è¡¥å…¨ æ ‡é¢˜å¤§å°åŒºåˆ†"></a>2017å¹´02æœˆ09æ—¥ æ˜ŸæœŸå›› åˆ—è¡¨è¡¥å…¨ æ ‡é¢˜å¤§å°åŒºåˆ†</h3><p>ä½¿ç”¨imgçš„erroräº‹ä»¶å®Œæˆé”™è¯¯å¤„ç†çš„éœ€æ±‚[task-11]ã€‚</p>
<p>ä¸‹ä¸€æ­¥ä»»åŠ¡ï¼šå®Œå–„ç¼–è¾‘ä½“éªŒï¼ˆå­¦ä¹ SimpleMDEï¼‰</p>
<ol>
<li>[task-12-âœ…]åˆ—è¡¨ç­‰å›è½¦ä¼šè‡ªåŠ¨è¡¥å…¨å‰ç¼€ </li>
<li>[task-13]ä»£ç å—èƒŒæ™¯è‰²</li>
<li>[task-14-âœ…]ä¸åŒçº§åˆ«çš„æ ‡é¢˜å¤§å°ä¸ä¸€æ · </li>
<li>[task-15]å›¾ç‰‡è¢«é€‰ä¸­æ—¶ï¼Œå˜è‰²</li>
<li>å­¦ä¹ å¦‚ä½•ç¼–å†™codemirror mode</li>
<li>[task-16]å›¾ç‰‡å®½åº¦æœ€å¤§ä¸ºç¼–è¾‘å™¨å®½åº¦</li>
</ol>
<p><strong>[task-12]:</strong></p>
<p><code>addon/edit/continuelist.js</code>,è¿™ä¸ªæ’ä»¶æ·»åŠ äº†<code>newlineAndIndentContinueMarkdownList</code>å‘½ä»¤ï¼Œå°†ä»–ç»‘å®šåˆ°Enterä¸Šå³å¯ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> editor = CodeMirror.fromTextArea(<span class="built_in">document</span>.getElementById(<span class="string">"code"</span>), &#123;</span><br><span class="line">    mode: <span class="string">'gfm'</span>,</span><br><span class="line">    lineNumbers: <span class="literal">true</span>,</span><br><span class="line">    theme: <span class="string">"default"</span>,</span><br><span class="line">    extraKeys: &#123;<span class="string">"Enter"</span>: <span class="string">"newlineAndIndentContinueMarkdownList"</span>&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>[task-14]ï¼š</strong></p>
<p>åœ¨cssä¸­æ·»åŠ <code>.CodeMirror .CodeMirror-code .cm-header-1~4</code>çš„æ ·å¼å³å¯ï¼š</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.CodeMirror</span> <span class="selector-class">.CodeMirror-code</span> <span class="selector-class">.cm-header-1</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">200%</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">200%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.CodeMirror</span> <span class="selector-class">.CodeMirror-code</span> <span class="selector-class">.cm-header-2</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">160%</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">160%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.CodeMirror</span> <span class="selector-class">.CodeMirror-code</span> <span class="selector-class">.cm-header-3</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">125%</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">125%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.CodeMirror</span> <span class="selector-class">.CodeMirror-code</span> <span class="selector-class">.cm-header-4</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">110%</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">110%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2017å¹´02æœˆ10æ—¥-æ˜ŸæœŸå…­-æ‰“åŒ…-ç¼–è¾‘å™¨å¡é¡¿æ’æŸ¥"><a href="#2017å¹´02æœˆ10æ—¥-æ˜ŸæœŸå…­-æ‰“åŒ…-ç¼–è¾‘å™¨å¡é¡¿æ’æŸ¥" class="headerlink" title="2017å¹´02æœˆ10æ—¥ æ˜ŸæœŸå…­ æ‰“åŒ… ç¼–è¾‘å™¨å¡é¡¿æ’æŸ¥"></a>2017å¹´02æœˆ10æ—¥ æ˜ŸæœŸå…­ æ‰“åŒ… ç¼–è¾‘å™¨å¡é¡¿æ’æŸ¥</h3><p><code>beforeSelectionChange</code>äº‹ä»¶ï¼Œä¼šåœ¨é€‰åŒºå˜åŒ–æ—¶ï¼Œä½†æ˜¯ç”Ÿæ•ˆå‰è§¦å‘ï¼Œè¿”å›çš„å¯¹è±¡åŒ…å«ï¼š{ranges, origin, update}ï¼Œå¯ä»¥è°ƒç”¨updateæ–¹æ³•æ¥æ›´æ–°é€‰åŒºã€‚</p>
<p>å®Œæˆæ–‡ç« ï¼š<a href="http://mushanshitiancai.github.io/2017/02/11/js/electron/%E6%89%93%E5%8C%85Electron%E5%BA%94%E7%94%A8/">æ‰“åŒ…Electronåº”ç”¨ | æœ¨æ‰çš„åšå®¢</a></p>
<p>ç›®å‰æ”¯æŒç²˜è´´/é¢„è§ˆå›¾ç‰‡çš„æœ€æ–°DEMOï¼š</p>
<p><img src="/img/mmnote-demo-170210.png" alt=""></p>
<p>å¤§è‡´çš„æ¶æ„å›¾ï¼š</p>
<p><img src="/img/mmnote-architecture-170211.svg" alt=""></p>
<p>ä¸‹ä¸€æ­¥ä»»åŠ¡ï¼š</p>
<ol>
<li>[task-17-âŒ]æ›´æ–°æ–‡æ¡£çš„stateç»“æ„ï¼Œåœ¨ç¼–è¾‘å™¨ç¼–è¾‘æ—¶ï¼Œä¸æ›´æ–°stateï¼ˆå¦‚æœæ›´æ–°ä¼šå¯¼è‡´æ•ˆç‡ä½ä¸‹ï¼‰ã€‚åªåœ¨saveæ—¶æ›´æ–°stateã€‚</li>
</ol>
<p>Editorç°åœ¨ä¼ å…¥çš„propsæ˜¯ä¸€ä¸ªurlï¼Œè¿™ä¸ªä¸å¤ªä¸å’Œç›®å‰çš„é€»è¾‘äº†ã€‚ç›®å‰ä½¿ç”¨äº†CMçš„Docï¼Œæ‰€ä»¥ä¸€ä¸ªeditorå…¶å®æ‰¿è½½äº†å¤šä¸ªdocï¼Œåªæ˜¯åŒæ—¶åªæ˜¾ç¤ºå½“å‰docã€‚</p>
<p>=&gt; å‘ç°å¦‚æœåœ¨ç¼–è¾‘å™¨æ›´æ–°æ—¶ä¸æ›´æ–°stateï¼Œé‚£ä¹ˆå°±ä¸æ˜¯react+reduxçš„æ¨¡å¼äº†ï¼Œå†™èµ·æ¥æ— ä»ä¸‹æ‰‹ã€‚ã€‚ã€‚å‚è€ƒäº†<a href="https://github.com/JedWatson/react-codemirror" target="_blank" rel="noopener">JedWatson/react-codemirror</a>ï¼Œå‘ç°ä»–çš„æ›´æ–°æ¨¡å¼å’Œæˆ‘ä¹‹å‰å†™çš„ä¸€æ ·ï¼Œå…ˆonChangeï¼Œç„¶åæ›´æ–°propsåå†æ¯”è¾ƒvalueï¼Œè¿™æ ·çœ‹èµ·æ¥çœŸçš„æ˜¯éå¸¸ä½æ•ˆå•Šã€‚ä½†æ˜¯ä»–çš„demoå¹¶æ²¡æœ‰å‡ºç°å¡é¡¿çš„ç°è±¡ã€‚</p>
<p>ç»è¿‡æ’æŸ¥ï¼Œå‘ç°å¦‚æœå…³é—­Reduxçš„DevToolsä¸­é—´ä»¶ï¼Œå¡é¡¿å°±æ¶ˆå¤±äº†ã€‚çœ‹æ¥æ˜¯å› ä¸ºè¾“å…¥æ—¶é¢‘ç¹æ›´æ–°stateï¼Œå¯¼è‡´devtoolå‡ºç°ç“¶é¢ˆï¼ˆäººå®¶æ¯•ç«Ÿæ˜¯æä¾›æ—¶é—´æ—…è¡Œçš„ã€‚ã€‚ã€‚ï¼‰</p>
<h3 id="2017å¹´02æœˆ12æ—¥-æ˜ŸæœŸæ—¥-äº†è§£Draft-js-File-URI-stateæ€è€ƒ"><a href="#2017å¹´02æœˆ12æ—¥-æ˜ŸæœŸæ—¥-äº†è§£Draft-js-File-URI-stateæ€è€ƒ" class="headerlink" title="2017å¹´02æœˆ12æ—¥ æ˜ŸæœŸæ—¥ äº†è§£Draft.js File URI stateæ€è€ƒ"></a>2017å¹´02æœˆ12æ—¥ æ˜ŸæœŸæ—¥ äº†è§£Draft.js File URI stateæ€è€ƒ</h3><ul>
<li><a href="https://facebook.github.io/draft-js/" target="_blank" rel="noopener">Draft.js | Rich Text Editor Framework for React</a></li>
</ul>
<p>è¿™æ˜¯simplenoteä½¿ç”¨çš„ç¼–è¾‘å™¨æ§ä»¶ï¼Œæ˜¯Facebookæ¨å‡ºçš„ä¸€ä¸ªåŸç”Ÿæ”¯æŒReactçš„ç¼–è¾‘å™¨ã€‚</p>
<ol>
<li>[task-18-âœ…]Draft.jsæ˜¯å¦‚ä½•æ¥å—å¤–éƒ¨æŒ‡ä»¤çš„ï¼Ÿæ¯”å¦‚replaceï¼Ÿ</li>
</ol>
<hr>
<p>ä¸ºäº†æ‰€è°“ä¹‹æ‰©å±•æ€§ï¼Œæ‰€æœ‰çš„ç¬”è®°è·¯å¾„ä½¿ç”¨uriæ ¼å¼</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/File_URI_scheme#cite_note-2" target="_blank" rel="noopener">file URI scheme - Wikipedia</a></li>
<li><a href="https://blogs.msdn.microsoft.com/ie/2006/12/06/file-uris-in-windows/" target="_blank" rel="noopener">File URIs in Windows â€“ IEBlog</a></li>
</ul>
<p>å·¥å…·ï¼š</p>
<ul>
<li><a href="https://github.com/medialize/URI.js" target="_blank" rel="noopener">medialize/URI.js: Javascript URL mutation library</a></li>
</ul>
<p>æˆ‘éœ€è¦çš„èƒ½åŠ›ï¼š</p>
<ol>
<li>åˆ¤æ–­åè®®</li>
<li>å¦‚æœæ˜¯fileï¼Œè·å–å¯¹åº”çš„æœ¬åœ°pathï¼ˆ<a href="https://github.com/TooTallNate/file-uri-to-path" target="_blank" rel="noopener">TooTallNate/file-uri-to-path: Convert a file: URI to a file path</a>ï¼‰</li>
<li>æœ¬åœ°pathå˜ä¸ºfile uriï¼ˆ<a href="https://www.npmjs.com/package/file-url" target="_blank" rel="noopener">file-url</a>ï¼‰</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add urijs file-uri-to-path file-url</span><br><span class="line">yarn add @types/urijs @types/file-url</span><br></pre></td></tr></table></figure>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span> <span class="keyword">module</span> 'file-uri-to-path' &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">uri2path</span>(<span class="params">uri: <span class="built_in">string</span></span>): <span class="title">string</span></span>;</span><br><span class="line">    <span class="keyword">export</span> = uri2path;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>ç°åœ¨stateçš„å®šä¹‰å’Œä½¿ç”¨éƒ½éå¸¸çš„ä¸æ–¹ä¾¿ï¼ğŸ˜¤</p>
<p>å› ä¸ºä½¿ç”¨äº†immutable.jsï¼Œå¯¼è‡´è·å–å’Œæ›´æ–°éƒ½éå¸¸çš„ä¸æ–¹ä¾¿ï¼Œè·å–å¿…é¡»ä½¿ç”¨getï¼Œç±»å‹å®šä¹‰å®Œå…¨æ— æ•ˆäº†ï¼Œè€Œä¸”åµŒå¥—çš„è¿˜å¾—ä½¿ç”¨get([â€˜aâ€™,â€™bâ€™]),ç®€ç›´æ¶å¿ƒåˆ°é€†å¤©ï¼Œè€Œä¸”stateæ›´æ–°è¿˜å¿…é¡»ä»é¡¶çº§å¾€ä¸‹æ›´æ–°æ‰è¡Œã€‚</p>
<p>å‚è€ƒäº†draft.jså’Œsimplenoteï¼Œæœ‰äº†å‡ ç‚¹ç»“è®ºï¼š</p>
<ol>
<li>çŠ¶æ€çš„ç»´æŠ¤æ¯”è¾ƒæ¶å¿ƒæ˜¯ä¸å¯é¿å…çš„ï¼Œå› ä¸ºdraft.jsä¸­ï¼Œæ›´æ–°EditorStateä¹Ÿä¸ç®€å•ï¼Œéƒ½æ˜¯ä»EditorStateè¿™ä¸ªé¡¶çº§stateå¼€å§‹æ›´æ–°å…¶ä¸­çš„å­stateçš„ï¼Œä½¿ç”¨setæˆ–è€…putï¼Œæˆ–è€…utilã€‚ã€‚ã€‚</li>
<li>è·å–çŠ¶æ€å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„æ–¹æ³•æ¥è·å–ï¼Œå…¶ä¸­åŒ…è£…immutableçš„getï¼Œè¿™æ ·ä¸ä¼šæ¶å¿ƒåˆ°å¤–é¢å»ï¼Œä½†æ˜¯é‡å¤ä»£ç é‡å¾ˆå¤šã€‚ã€‚ã€‚ã€‚</li>
<li>draft.jsæ¯”è¾ƒè±ªåï¼Œæ‰€æœ‰å­çŠ¶æ€ï¼Œåªè¦ä¸æ˜¯ç®€å•ç±»å‹çš„ï¼Œéƒ½æ˜¯è‡ªå®šä¹‰Recordæˆ–è€…è‡ªå®šä¹‰å…¶ä»–æ•°æ®ç»“æ„ï¼Œæ ·æ¿ä»£ç é‡å¾ˆå¤§ã€‚</li>
<li>stateå°½é‡æ‰å¹³åŒ–å§ï¼Œä¼šä¸é‚£ä¹ˆæ¶å¿ƒä¸€ç‚¹ï¼Œæ¯”å¦‚simplenoteåŸºæœ¬åªæœ‰ä¸€å±‚</li>
<li>simplenoteæŠŠè¿œç«¯æœåŠ¡çš„Bucketç›´æ¥æ”¾åˆ°stateä¸­å»ï¼Œè¿™æ ·åšå¥½å—ï¼Ÿ</li>
</ol>
<h3 id="2017å¹´02æœˆ13æ—¥-æ˜ŸæœŸä¸€"><a href="#2017å¹´02æœˆ13æ—¥-æ˜ŸæœŸä¸€" class="headerlink" title="2017å¹´02æœˆ13æ—¥ æ˜ŸæœŸä¸€"></a>2017å¹´02æœˆ13æ—¥ æ˜ŸæœŸä¸€</h3><p>ç»§ç»­çº ç»“reduxçš„stateçš„é—®é¢˜ã€‚</p>
<ul>
<li><a href="http://cn.redux.js.org/docs/recipes/reducers/NormalizingStateShape.html" target="_blank" rel="noopener">State èŒƒå¼åŒ– | Redux ä¸­æ–‡æ–‡æ¡£ Join the chat at https://gitter.im/camsong/redux-in-chinese</a></li>
</ul>
<blockquote>
<p>ä¸Šé¢çš„æ•°æ®ç»“æ„æ¯”è¾ƒå¤æ‚ï¼Œå¹¶ä¸”æœ‰éƒ¨åˆ†æ•°æ®æ˜¯é‡å¤çš„ã€‚è¿™é‡Œè¿˜å­˜åœ¨ä¸€äº›è®©äººå…³å¿ƒçš„é—®é¢˜ï¼š</p>
<ol>
<li>å½“æ•°æ®åœ¨å¤šå¤„å†—ä½™åï¼Œéœ€è¦æ›´æ–°æ—¶ï¼Œå¾ˆéš¾ä¿è¯æ‰€æœ‰çš„æ•°æ®éƒ½è¿›è¡Œæ›´æ–°ã€‚</li>
<li>åµŒå¥—çš„æ•°æ®æ„å‘³ç€ reducer é€»è¾‘åµŒå¥—æ›´å¤šã€å¤æ‚åº¦æ›´é«˜ã€‚å°¤å…¶æ˜¯åœ¨æ‰“ç®—æ›´æ–°æ·±å±‚åµŒå¥—æ•°æ®æ—¶ã€‚</li>
<li>ä¸å¯å˜çš„æ•°æ®åœ¨æ›´æ–°æ—¶éœ€è¦çŠ¶æ€æ ‘çš„ç¥–å…ˆæ•°æ®è¿›è¡Œå¤åˆ¶å’Œæ›´æ–°ï¼Œå¹¶ä¸”æ–°çš„å¯¹è±¡å¼•ç”¨ä¼šå¯¼è‡´ä¸ä¹‹ connect çš„æ‰€æœ‰ UI ç»„ä»¶éƒ½é‡å¤ renderã€‚å°½ç®¡è¦æ˜¾ç¤ºçš„æ•°æ®æ²¡æœ‰å‘ç”Ÿä»»ä½•æ”¹å˜ï¼Œå¯¹æ·±å±‚åµŒå¥—çš„æ•°æ®å¯¹è±¡è¿›è¡Œæ›´æ–°ä¹Ÿä¼šå¼ºåˆ¶å®Œå…¨æ— å…³çš„ UI ç»„ä»¶é‡å¤ render<br>æ­£å› ä¸ºå¦‚æ­¤ï¼Œåœ¨ Redux Store ä¸­ç®¡ç†å…³ç³»æ•°æ®æˆ–åµŒå¥—æ•°æ®çš„æ¨èåšæ³•æ˜¯å°†è¿™ä¸€éƒ¨åˆ†è§†ä¸º<strong>æ•°æ®åº“</strong>ï¼Œå¹¶ä¸”å°†æ•°æ®æŒ‰èŒƒå¼åŒ–å­˜å‚¨ã€‚</li>
</ol>
</blockquote>
<ul>
<li><a href="http://cn.redux.js.org/docs/recipes/reducers/ImmutableUpdatePatterns.html" target="_blank" rel="noopener">ä¸å¯å˜æ›´æ–°æ¨¡å¼ | Redux ä¸­æ–‡æ–‡æ¡£ Join the chat at https://gitter.im/camsong/redux-in-chinese</a></li>
</ul>
<blockquote>
<p>æ­£ç¡®æ–¹æ³•ï¼šå¤åˆ¶åµŒå¥—æ•°æ®çš„æ‰€æœ‰å±‚çº§</p>
<p>ä¸å¹¸çš„æ˜¯ï¼Œæ­£ç¡®åœ°ä½¿ç”¨ä¸å˜çš„æ›´æ–°å»æ·±åº¦åµŒå¥—çŠ¶æ€çš„è¿‡ç¨‹å¾ˆå®¹æ˜“å˜å¾—å†—é•¿éš¾è¯»ã€‚ æ›´æ–° ate.first.second[someId].fourth çš„ç¤ºä¾‹å¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
</blockquote>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function updateVeryNestedField(state, action) &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        ....state,</span><br><span class="line">        first : &#123;</span><br><span class="line">            ...state.first,</span><br><span class="line">            second : &#123;</span><br><span class="line">                ...state.first.second,</span><br><span class="line">                [action.someId] : &#123;</span><br><span class="line">                    ...state.first.second[action.someId],</span><br><span class="line">                    fourth : action.someValue</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre><blockquote>
<p>æ˜¾ç„¶ï¼Œæ¯ä¸€å±‚åµŒå¥—ä½¿å¾—é˜…è¯»æ›´åŠ å›°éš¾ï¼Œå¹¶ç»™äº†æ›´å¤šçŠ¯é”™çš„æœºä¼šã€‚è¿™æ˜¯å…¶ä¸­ä¸€ä¸ªåŸå› ï¼Œé¼“åŠ±ä½ ä¿æŒçŠ¶æ€æ‰å¹³ï¼Œå°½å¯èƒ½æ„å»º reducerã€‚</p>
</blockquote>
<p>ç®€ç›´æ˜¯ç¾éš¾ã€‚ã€‚ã€‚ã€‚</p>
<p>immutableçš„Cursorç”¨èµ·æ¥ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Cursor = <span class="built_in">require</span>(<span class="string">'immutable/contrib/cursor'</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://segmentfault.com/a/1190000003910357" target="_blank" rel="noopener">Immutable è¯¦è§£åŠ React ä¸­å®è·µ - pure render - SegmentFault</a></li>
</ul>
<h3 id="2017å¹´02æœˆ18æ—¥-æ˜ŸæœŸå…­-tree-viewç»“åˆRedux-è½¯é“¾æ¥å¤„ç†-fs-promise"><a href="#2017å¹´02æœˆ18æ—¥-æ˜ŸæœŸå…­-tree-viewç»“åˆRedux-è½¯é“¾æ¥å¤„ç†-fs-promise" class="headerlink" title="2017å¹´02æœˆ18æ—¥ æ˜ŸæœŸå…­ tree-viewç»“åˆRedux è½¯é“¾æ¥å¤„ç† fs-promise"></a>2017å¹´02æœˆ18æ—¥ æ˜ŸæœŸå…­ tree-viewç»“åˆRedux è½¯é“¾æ¥å¤„ç† fs-promise</h3><p>Redux å®˜æ–¹ <a href="https://github.com/reactjs/redux/tree/master/examples/tree-view" target="_blank" rel="noopener">Tree View</a> ç¤ºä¾‹:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/reactjs/redux.git</span><br><span class="line"></span><br><span class="line">cd redux/examples/tree-view</span><br><span class="line">npm install</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure>
<p>open <a href="http://localhost:3000/" target="_blank" rel="noopener">http://localhost:3000/</a></p>
<blockquote>
<p>è¯¥ç¤ºä¾‹å±•ç¤ºäº†æ·±å±‚åµŒå¥—æ ‘çŠ¶è§†å›¾çš„æ¸²æŸ“ï¼Œä»¥åŠä¸ºäº†æ–¹ä¾¿ reducer æ›´æ–°ï¼Œstate çš„æ ‡å‡†åŒ–å†™æ³•ã€‚ä¼˜è‰¯çš„æ¸²æŸ“è¡¨ç°ï¼Œæ¥è‡ªäºå®¹å™¨ç»„ä»¶ç»†ç²’åº¦çš„ã€ä»…é’ˆå¯¹éœ€è¦æ¸²æŸ“çš„ tree node çš„ç»‘å®šã€‚</p>
</blockquote>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ ‘ç»“æ„è¢«æ‹‰å¹³äº†ã€‚è¿™æ˜¯reduxçš„stateçš„æ ‡å‡†åŒ–å†™æ³•ï¼Œæ–¹ä¾¿æ›´æ–°ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tree = &#123;</span><br><span class="line">    <span class="number">0</span>: &#123;</span><br><span class="line">      id: <span class="number">0</span>,</span><br><span class="line">      counter: <span class="number">0</span>,</span><br><span class="line">      childIds: [],</span><br><span class="line">      parentId: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>ä¸åŒè½¯ä»¶å¯¹äºè½¯é“¾æ¥çš„å¤„ç†æ˜¯å¦‚ä½•çš„å‘¢ï¼Ÿ</p>
<p><img src="/img/mmnote-sublime-ln-file.png" alt=""></p>
<p><img src="/img/mmnote-vscode-ln-file.png" alt=""></p>
<p>æˆ‘å€¾å‘äºvscodeï¼Œä½†æ˜¯è½¯é“¾æ¥çš„æ–‡ä»¶å¤¹æ˜¯ä¸æ˜¯åº”è¯¥ç”¨ä¸åŒçš„logoï¼Ÿ</p>
<hr>
<p>ç§»å…¥fs-promiseåï¼Œwebpackä¼šæŠ¥é”™ï¼Œå‚è€ƒï¼š</p>
<ul>
<li><a href="https://github.com/kevinbeaty/any-promise/issues/27" target="_blank" rel="noopener">Module parse failed: /â€¦/node_modules/any-promise/LICENSE Unexpected token Â· Issue #27 Â· kevinbeaty/any-promise</a></li>
</ul>
<p>åœ¨webpacké…ç½®ä¸­æ·»åŠ ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.NormalModuleReplacementPlugin(<span class="regexp">/^any\-promise$/</span>, <span class="string">'bluebird'</span>),</span><br><span class="line">],</span><br></pre></td></tr></table></figure>
<h3 id="2017å¹´02æœˆ19æ—¥-æ˜ŸæœŸæ—¥"><a href="#2017å¹´02æœˆ19æ—¥-æ˜ŸæœŸæ—¥" class="headerlink" title="2017å¹´02æœˆ19æ—¥ æ˜ŸæœŸæ—¥"></a>2017å¹´02æœˆ19æ—¥ æ˜ŸæœŸæ—¥</h3><ul>
<li>[task-19-âœ…]æ•´åˆç›®å½•æ ‘å’Œæ–‡æ¡£</li>
</ul>
<p><strong>[task-19]</strong></p>
<p>è¿™ä¸ªæ•´åˆå®Œï¼Œç¬¬ä¸€é˜¶æ®µå°±å·®ä¸å¤šäº†ã€‚ç°åœ¨æœ‰å‡ ç‚¹ä½“ä¼šï¼š</p>
<ol>
<li>React+Reduxè¿™ä¸€å¥—å¾ˆå¼ºï¼Œä½†æ˜¯æˆ‘ä½œä¸ºä»OOè¿™ä¸ªä½“ç³»è¿‡æ¥çš„ï¼Œè„‘å­è¿˜æ˜¯æ²¡æœ‰å®Œå…¨è½¬è¿‡å¼¯æ¥ï¼Œå¯¹äºä¸æ˜¯â€œç»„ä»¶.æ“ä½œ(æ•°æ®)â€è¿™ç§æ¨¡å¼è¿˜æ˜¯ä¸é€‚ç”¨ï¼Œè€æƒ³ç€ç›´æ¥æ“ä½œç»„ä»¶ã€‚</li>
<li>React+Reduxè¿™ä¸€å¥—å¾ˆå¼ºï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥ä¸æ˜¯å¾ˆç®€å•ï¼Œç»„ä»¶çš„ç¼–å†™è¿˜å¥½ï¼Œä½†æ˜¯çŠ¶æ€è¿™ä¸€å—ç®€ç›´ä¸èƒ½å†æ¶å¿ƒäº†ã€‚ã€‚ã€‚è™½ç„¶ç”¨ä¸ŠImmutableåï¼Œæ‹¼è£…æ–°çš„stateè¿”å›è¿™ä¸ªä¸é‚£ä¹ˆä¹±äº†ï¼Œä½†æ˜¯è¯»å–å’Œæ›´æ–°çŠ¶æ€ï¼ŒçœŸå¿ƒéº»çƒ¦ã€‚ã€‚ã€‚è€Œä¸”ç±»å‹ç³»ç»Ÿæ‰‘è¡—</li>
</ol>
<p><img src="/img/mmnote-redux-state-complex.png" alt=""></p>
<p>ä¸ºäº†å°½å¿«å§è¿™ä¸ªé¡¹ç›®å†™å‡ºæ¥ï¼Œæœ€è¿‘æœ‰äº›ç„¦è™‘ç—‡äº†ï¼Œå½±å“éšçœ çš„çº§åˆ«ã€‚ã€‚ã€‚çœŸæ‹…å¿ƒèƒƒç‚å› æ­¤åˆçŠ¯äº†ã€‚</p>
<p><img src="/img/mmnote-combine-tree-and-editor.png" alt=""></p>
<h3 id="2017å¹´02æœˆ20æ—¥-æ˜ŸæœŸä¸€"><a href="#2017å¹´02æœˆ20æ—¥-æ˜ŸæœŸä¸€" class="headerlink" title="2017å¹´02æœˆ20æ—¥ æ˜ŸæœŸä¸€"></a>2017å¹´02æœˆ20æ—¥ æ˜ŸæœŸä¸€</h3><p>æç¤ºWarningï¼š<code>Warning: a promise was created in a handler but was not returned from it</code></p>
<p>å‚è€ƒï¼š<a href="http://bluebirdjs.com/docs/warning-explanations.html#warning-a-promise-was-created-in-a-handler-but-was-not-returned-from-it" target="_blank" rel="noopener">Warning Explanations | bluebird</a></p>
<p>ä¾‹å­ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">fsp.stat(path).then(<span class="function"><span class="params">stats</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (stats.isFile()) &#123;</span><br><span class="line">        dispatch(openFileAction(path));</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (stats.isDirectory()) &#123;</span><br><span class="line">        dispatch(openFolderAction(path));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;  <span class="comment">// &lt;-- åé¢æœ‰catchæˆ–è€…thenå¿…é¡»åŠ ï¼Œä¸ç„¶å°±è­¦å‘Šäº†</span></span><br><span class="line">&#125;).catch(sendFailAction(dispatch, ACT_OPEN_FAIL));</span><br></pre></td></tr></table></figure>
<ul>
<li>[task-20]å›¾ç‰‡å’Œæ–‡å­—åœ¨åŒä¸€è¡Œæ—¶ï¼Œç¼–è¾‘æ–‡å­—ä¸æ­£å¸¸</li>
</ul>
<h3 id="2017å¹´02æœˆ22æ—¥-æ˜ŸæœŸä¸‰"><a href="#2017å¹´02æœˆ22æ—¥-æ˜ŸæœŸä¸‰" class="headerlink" title="2017å¹´02æœˆ22æ—¥ æ˜ŸæœŸä¸‰"></a>2017å¹´02æœˆ22æ—¥ æ˜ŸæœŸä¸‰</h3><p>æŸ¥Immutable.jsçš„ç”¨èµ·æ¥ç—›è‹¦çš„èµ„æ–™ï¼Œåˆ°äº†vue.jsï¼Œå‘ç°äº†æåˆ°äº†MobXï¼Œäº†è§£äº†ä¸€ä¸‹ï¼ŒåŸæ¥æ˜¯Reactä¸Šæ–°çš„çŠ¶æ€ç®¡ç†æ¡†æ¶ã€‚æŸ¥äº†ä¸‹ï¼Œéƒ½è¯´æ¯”Reduxå¥½å†™å¾ˆå¤šï¼Œå¤§è‡´äº†è§£ä¸€ä¸‹ï¼Œæ„Ÿè§‰ä¸é”™ã€‚</p>
<ul>
<li><a href="http://cn.vuejs.org/v2/guide/comparison.html#MobX" target="_blank" rel="noopener">å¯¹æ¯”å…¶ä»–æ¡†æ¶ - vue.js</a> </li>
<li><a href="https://mobx.js.org/faq/blogs.html" target="_blank" rel="noopener">Tutorials, videos and blogs | MobX</a></li>
</ul>
<h3 id="2017å¹´02æœˆ26æ—¥-æ˜ŸæœŸæ—¥-åˆæ­¥æ•´åˆkityminder-å­¦ä¹ mobx"><a href="#2017å¹´02æœˆ26æ—¥-æ˜ŸæœŸæ—¥-åˆæ­¥æ•´åˆkityminder-å­¦ä¹ mobx" class="headerlink" title="2017å¹´02æœˆ26æ—¥ æ˜ŸæœŸæ—¥ åˆæ­¥æ•´åˆkityminder å­¦ä¹ mobx"></a>2017å¹´02æœˆ26æ—¥ æ˜ŸæœŸæ—¥ åˆæ­¥æ•´åˆkityminder å­¦ä¹ mobx</h3><p><img src="/img/mmnote-add-kityminder.png" alt=""></p>
<p>çœ‹å®Œäº†mobxæ•™ç¨‹ï¼Œç‰›é€¼ï¼Œè¿™æ ·å°±å®ç°äº†è‡ªåŠ¨æ›´æ–°äº†ï¼Œå†™èµ·æ¥ç»å¯¹æ¯”reduxè¿™ç§è½»æ¾å¾ˆå¤šã€‚è‡³äºçŠ¶æ€æ˜¯å¯å˜çš„ï¼Œç›®å‰çœ‹æ¥åªæ˜¯ä¸èƒ½æ—¶é—´æ—…è¡Œäº†ã€‚</p>
<p>å¤§è‡´ç”¨äº†ä¸€ä¸‹ï¼Œçˆ½ï¼æœ€çˆ½çš„ä¸€ç‚¹æ˜¯å¯ä»¥ç›´æ¥èŒƒå›´å¯¹è±¡å±æ€§äº†ï¼Œè€Œä¸æ˜¯ä½¿ç”¨immutableå“ªç§æ¶å¿ƒçš„è®¿é—®æ–¹å¼ã€‚è¿™å°±å¯ä»¥ç”¨ä¸Štypescriptçš„ç±»å‹ä¼˜åŠ¿äº†ã€‚</p>
</div><div class="reward"><hr><div class="text">å¦‚æœè§‰å¾—æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œå°±æ‰“èµæ¯å’–å•¡é’±å‘—ğŸ˜Š</div><img src="/img/reward/weixin.png"><img src="/img/reward/alipay.png"></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://mushanshitiancai.github.io/2016/12/21/project/mmnote/MMNoteå¼€å‘ç¬”è®°/" data-id="cjk56xl9a00m8oj31d4adtu1r" class="article-share-link">åˆ†äº«</a><div class="tags"><a href="/tags/mmnote/">mmnote</a></div><div class="post-nav"><a href="/2016/12/21/js/css/CSSç¬”è®°-CSS-in-JS/" class="pre">CSSç¬”è®°-CSS in JS</a><a href="/2016/12/13/js/react/Reactèµ„æºæ”¶é›†/" class="next">Reactèµ„æºæ”¶é›†</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">é˜…è¯»è¯„è®º ã€Œè¯·ç¡®ä¿ disqus.com å¯ä»¥æ­£å¸¸åŠ è½½ã€</button></div><script>var disqus_shortname = 'mushan';
var disqus_identifier = '2016/12/21/project/mmnote/MMNoteå¼€å‘ç¬”è®°/';
var disqus_title = 'MMNoteå¼€å‘ç¬”è®°';
var disqus_url = 'http://mushanshitiancai.github.io/2016/12/21/project/mmnote/MMNoteå¼€å‘ç¬”è®°/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/favicon.ico',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//mushan.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://mushanshitiancai.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/Groovy/">Groovy</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/JDKæºç é˜…è¯»/">JDKæºç é˜…è¯»</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/Spring/">Spring</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/æŒæ¡Java/">æŒæ¡Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/è°ƒè¯•/">è°ƒè¯•</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/TypeScript/">TypeScript</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MongoDB/">MongoDB</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/RabbitMQ/">RabbitMQ</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tomcat/">Tomcat</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/electron/">electron</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/è‡ªåŠ¨åŒ–/">è‡ªåŠ¨åŒ–</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/è‡ªå·±åŠ¨æ‰‹å†™æ“ä½œç³»ç»Ÿ/">è‡ªå·±åŠ¨æ‰‹å†™æ“ä½œç³»ç»Ÿ</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/bochs/" style="font-size: 15px;">bochs</a> <a href="/tags/work/" style="font-size: 15px;">work</a> <a href="/tags/log/" style="font-size: 15px;">log</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/angularjs/" style="font-size: 15px;">angularjs</a> <a href="/tags/db/" style="font-size: 15px;">db</a> <a href="/tags/mongodb/" style="font-size: 15px;">mongodb</a> <a href="/tags/react/" style="font-size: 15px;">react</a> <a href="/tags/mmnote/" style="font-size: 15px;">mmnote</a> <a href="/tags/architecture/" style="font-size: 15px;">architecture</a> <a href="/tags/protocol-buffers/" style="font-size: 15px;">protocol-buffers</a> <a href="/tags/mq/" style="font-size: 15px;">mq</a> <a href="/tags/blog/" style="font-size: 15px;">blog</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/tools/" style="font-size: 15px;">tools</a> <a href="/tags/emacs/" style="font-size: 15px;">emacs</a> <a href="/tags/ç®¡ç†åå°/" style="font-size: 15px;">ç®¡ç†åå°</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/shell/" style="font-size: 15px;">shell</a> <a href="/tags/os/" style="font-size: 15px;">os</a> <a href="/tags/tmux/" style="font-size: 15px;">tmux</a> <a href="/tags/vagrant/" style="font-size: 15px;">vagrant</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/automation/" style="font-size: 15px;">automation</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/project/" style="font-size: 15px;">project</a> <a href="/tags/software/" style="font-size: 15px;">software</a> <a href="/tags/test/" style="font-size: 15px;">test</a> <a href="/tags/ffmpeg/" style="font-size: 15px;">ffmpeg</a> <a href="/tags/gm/" style="font-size: 15px;">gm</a> <a href="/tags/graphicsmagick/" style="font-size: 15px;">graphicsmagick</a> <a href="/tags/wireshark/" style="font-size: 15px;">wireshark</a> <a href="/tags/vscode/" style="font-size: 15px;">vscode</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/curl/" style="font-size: 15px;">curl</a> <a href="/tags/javafx/" style="font-size: 15px;">javafx</a> <a href="/tags/jvm/" style="font-size: 15px;">jvm</a> <a href="/tags/junit/" style="font-size: 15px;">junit</a> <a href="/tags/groovy/" style="font-size: 15px;">groovy</a> <a href="/tags/idea/" style="font-size: 15px;">idea</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/guava/" style="font-size: 15px;">guava</a> <a href="/tags/doclet/" style="font-size: 15px;">doclet</a> <a href="/tags/log4j/" style="font-size: 15px;">log4j</a> <a href="/tags/servlet/" style="font-size: 15px;">servlet</a> <a href="/tags/dubbo/" style="font-size: 15px;">dubbo</a> <a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/electron/" style="font-size: 15px;">electron</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/jquery/" style="font-size: 15px;">jquery</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/typescript/" style="font-size: 15px;">typescript</a> <a href="/tags/webpack/" style="font-size: 15px;">webpack</a> <a href="/tags/ts/" style="font-size: 15px;">ts</a> <a href="/tags/gulp/" style="font-size: 15px;">gulp</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/07/28/java/language/Javaæ—¥å¿—-Log4jæºç åˆ†æ/">Javaæ—¥å¿—-Log4jæºç åˆ†æ</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/22/java/language/Javaæ—¥å¿—-SLF4Jä½¿ç”¨ä¸æºç åˆ†æ/">Javaæ—¥å¿—-SLF4Jä½¿ç”¨ä¸æºç åˆ†æ</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/11/os/è‡ªå·±åŠ¨æ‰‹å†™æ“ä½œç³»ç»Ÿ-è®¡ç®—æœºé€šç”µä¹‹åçš„æ“ä½œ/">è‡ªå·±åŠ¨æ‰‹å†™æ“ä½œç³»ç»Ÿ-è®¡ç®—æœºé€šç”µä¹‹åçš„æ“ä½œ</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/11/os/Bochså­¦ä¹ -å®‰è£…é…ç½®ç¯‡/">Bochså­¦ä¹ -å®‰è£…é…ç½®ç¯‡</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/18/java/language/Javaå¦‚ä½•ä¿è¯æ–‡ä»¶è½ç›˜ï¼Ÿ/">Javaå¦‚ä½•ä¿è¯æ–‡ä»¶è½ç›˜ï¼Ÿ</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/17/linux/Linux-UNIXç¼–ç¨‹å¦‚ä½•ä¿è¯æ–‡ä»¶è½ç›˜/">Linux/UNIXç¼–ç¨‹å¦‚ä½•ä¿è¯æ–‡ä»¶è½ç›˜</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/07/db/MongoDBéå†æ–¹å¼å¯¹æ¯”/">MongoDBéå†æ–¹å¼å¯¹æ¯”</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/04/java/language/JDKæºç é˜…è¯»-RandomAccessFile/">JDKæºç é˜…è¯»-RandomAccessFile</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/04/java/language/JDKæºç é˜…è¯»-FileOutputStream/">JDKæºç é˜…è¯»-FileOutputStream</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/03/java/language/JDKæºç é˜…è¯»-FileInputStream/">JDKæºç é˜…è¯»-FileInputStream</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> æœ€è¿‘è¯„è®º</i></div><script type="text/javascript" src="//mushan.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> å‹æƒ…é“¾æ¥</i></div><ul></ul><a href="http://anotom.com/" title="é‘«å“¥çš„åšå®¢" target="_blank">é‘«å“¥çš„åšå®¢</a><ul></ul><a href="https://www.caylor.cc/" title="ä¹å“¥çš„åšå®¢" target="_blank">ä¹å“¥çš„åšå®¢</a><ul></ul><a href="http://zach41.github.io/" title="å°ç¾çš„åšå®¢" target="_blank">å°ç¾çš„åšå®¢</a><ul></ul><a href="http://blog.csdn.net/sinat_25127047" title="ç€šæ–‡çš„åšå®¢" target="_blank">ç€šæ–‡çš„åšå®¢</a><ul></ul><a href="http://blog.csdn.net/xiaohangblog?viewmode=contents)" title="å°æ­çš„åšå®¢" target="_blank">å°æ­çš„åšå®¢</a><ul></ul><a href="http://bettercuicui.github.io/" title="å¤ä¾¯çš„åšå®¢" target="_blank">å¤ä¾¯çš„åšå®¢</a><ul></ul><a href="http://damye.github.io/" title="ç¬¦å°§çš„åšå®¢" target="_blank">ç¬¦å°§çš„åšå®¢</a><ul></ul><a href="http://blog.shrp.me/" title="å°šå¼Ÿçš„åšå®¢" target="_blank">å°šå¼Ÿçš„åšå®¢</a><ul></ul><a href="http://imethan.cn" title="åº”é”‹çš„åšå®¢" target="_blank">åº”é”‹çš„åšå®¢</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2018 <a href="/." rel="nofollow">æœ¨æ‰çš„åšå®¢.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>